/*
 * Copyright (c) 2011, Yahoo! Inc.  All rights reserved.
 * Copyright (c) 2011-2012, Log-Normal, Inc.  All rights reserved.
 * Copyright (c) 2012-2017, SOASTA, Inc. All rights reserved.
 * Copyright (c) 2017, Akamai Technologies, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms.
 */
/* JavaScript MD5 1.0.1 Copyright 2011, Sebastian Tschan. Licensed under the MIT license. */
/* Boomerang Version: 1.0.0 93f9cf60ac429cf0645c0b3ee59c004adcc63900 */

BOOMR_start=(new Date).getTime();function BOOMR_check_doc_domain(t){if(window){if(!t){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(e){BOOMR.isCrossOriginError(e)||BOOMR.addError(e,"BOOMR_check_doc_domain.domainFix")}t=document.domain}if(-1!==t.indexOf(".")){try{window.parent.document;return}catch(e){document.domain=t}try{window.parent.document;return}catch(e){t=t.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(t)}}}BOOMR_check_doc_domain();!function(u){var c,t,l,o,a,e,r,n=u;u.parent!==u&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(u=u.parent);l=u.document;u.BOOMR||(u.BOOMR={});BOOMR=u.BOOMR;if(!BOOMR.version){BOOMR.version="1.0.0";BOOMR.window=u;BOOMR.boomerang_frame=n;BOOMR.plugins||(BOOMR.plugins={});!function(){try{void 0!==new u.CustomEvent("CustomEvent")&&(o=function(e,t){return new u.CustomEvent(e,t)})}catch(e){}try{!o&&l.createEvent&&l.createEvent("CustomEvent")&&(o=function(e,t){var n=l.createEvent("CustomEvent");t=t||{cancelable:!1,bubbles:!1};n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n})}catch(e){}!o&&l.createEventObject&&(o=function(e,t){var n=l.createEventObject();n.type=n.propertyName=e;n.detail=t.detail;return n});o=o||function(){}}();a=function(t,e,n){var i=o(t,{detail:e});i&&(n?BOOMR.setImmediate(r):r());function r(){try{l.dispatchEvent?l.dispatchEvent(i):l.fireEvent&&l.fireEvent("onpropertychange",i)}catch(e){BOOMR.debug("Error when dispatching "+t)}}};if(void 0!==l.hidden){e="visibilityState";r="visibilitychange"}else if(void 0!==l.mozHidden){e="mozVisibilityState";r="mozvisibilitychange"}else if(void 0!==l.msHidden){e="msVisibilityState";r="msvisibilitychange"}else if(void 0!==l.webkitHidden){e="webkitVisibilityState";r="webkitvisibilitychange"}c={beacon_url:"",beacon_url_force_https:!0,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:void 0,beacon_with_credentials:!1,beacon_disable_sendbeacon:!1,site_domain:u.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:void 0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],spa_cancel:[],xhr_send:[],xhr_error:[],error:[],xhr_send:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",xb_handler:function(n){return function(e){var t;(e=e||u.event).target?t=e.target:e.srcElement&&(t=e.srcElement);3===t.nodeType&&(t=t.parentNode);t&&t.nodeName&&"OBJECT"===t.nodeName.toUpperCase()&&"application/x-shockwave-flash"===t.type||c.fireEvent(n,t)}},clearEvents:function(){var e;for(e in this.events)this.events.hasOwnProperty(e)&&(this.events[e]=[])},clearListeners:function(){var e;for(e in c.listenerCallbacks)if(c.listenerCallbacks.hasOwnProperty(e))for(;c.listenerCallbacks[e].length;)BOOMR.utils.removeListener(c.listenerCallbacks[e][0].el,e,c.listenerCallbacks[e][0].fn);c.listenerCallbacks={}},fireEvent:function(t,e){var n,i,r,o;t=t.toLowerCase();this.translate_events[t]&&(t=this.translate_events[t]);if(this.events.hasOwnProperty(t)){this.public_events.hasOwnProperty(t)&&a(this.public_events[t],e);r=this.events[t];"before_beacon"!==t&&"beacon"!==t&&BOOMR.real_sendBeacon();o=r.length;for(n=0;n<o;n++)try{(i=r[n]).fn.call(i.scope,e,i.cb_data)}catch(e){BOOMR.addError(e,"fireEvent."+t+"<"+n+">")}for(n=0;n<o;n++)if(r[n].once){r.splice(n,1);o--;n--}}},spaNavigation:function(){c.onloadfired=!0},beaconUrlAllowed:function(e){if(!c.beacon_urls_allowed||0===c.beacon_urls_allowed.length)return!0;for(var t=0;t<c.beacon_urls_allowed.length;t++){if(new RegExp(c.beacon_urls_allowed[t]).exec(e))return!0}return!1},checkLocalStorageSupport:function(){var e=c.LOCAL_STORAGE_PREFIX+"clss";c.localStorageSupported=!1;try{if(!u.JSON||!u.localStorage)return;u.localStorage.setItem(e,e);c.localStorageSupported=u.localStorage.getItem(e)===e;u.localStorage.removeItem(e)}catch(e){c.localStorageSupported=!1}}};(t={t_start:BOOMR_start,t_end:void 0,url:"",config_url:null,loadedLate:!1,beaconsSent:0,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:c.site_domain,ID:Math.random().toString(36).replace(/^0\./,""),start:void 0,length:0,enabled:!0},utils:{hasPostMessageSupport:function(){return!(!u.postMessage||"function"!=typeof u.postMessage&&"object"!=typeof u.postMessage)},objectToString:function(e,t,n){var i,r=[];if(!e||"object"!=typeof e)return e;void 0===t&&(t="\n\t");n=n||0;if(BOOMR.utils.isArray(e)){for(i=0;i<e.length;i++)0<n&&null!==e[i]&&"object"==typeof e[i]?r.push(this.objectToString(e[i],t+("\n\t"===t?"\t":""),n-1)):"&"===t?r.push(encodeURIComponent(e[i])):r.push(e[i]);t=","}else for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0<n&&null!==e[i]&&"object"==typeof e[i]?r.push(encodeURIComponent(i)+"="+this.objectToString(e[i],t+("\n\t"===t?"\t":""),n-1)):"&"===t?r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i])):r.push(i+"="+e[i]));return r.join(t)},getCookie:function(e){if(!e)return null;e=" "+e+"=";var t,n;if(0<=(t=(n=" "+l.cookie+";").indexOf(e))){t+=e.length;return n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")}},setCookie:function(e,t,n){var i,r,o,a,s;if(!e||!BOOMR.session.domain||void 0===t){BOOMR.debug("Invalid parameters or site domain: "+e+"/"+t+"/"+BOOMR.session.domain);BOOMR.addVar("nocookie",1);return!1}if((r=e+'="'+(i=this.objectToString(t,"&"))+'"').length<500){a=[r,"path=/","domain="+BOOMR.session.domain];if("number"==typeof n){(s=new Date).setTime(s.getTime()+1e3*n);s=s.toGMTString();a.push("expires="+s)}l.cookie=a.join("; ");if(i===(o=this.getCookie(e))||void 0===o&&"number"==typeof n&&n<=0)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+i+"\n"+o)}else BOOMR.warn("Cookie too long: "+r.length+" "+r);BOOMR.addVar("nocookie",1);return!1},getSubCookies:function(e){var t,n,i,r,o=!1,a={};if(!e)return null;if("string"!=typeof e){BOOMR.debug("TypeError: cookie is not a string: "+typeof e);return null}for(n=0,i=(t=e.split("&")).length;n<i;n++)if((r=t[n].split("="))[0]){r.push("");a[decodeURIComponent(r[0])]=decodeURIComponent(r[1]);o=!0}return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},getLocalStorage:function(e){var t,n;if(!e||!c.localStorageSupported)return null;try{if(null===(t=u.localStorage.getItem(c.LOCAL_STORAGE_PREFIX+e)))return;n=u.JSON.parse(t)}catch(e){BOOMR.warn(e);return null}if(!n||"object"!=typeof n.items){this.removeLocalStorage(e);return null}if(!("number"==typeof n.expires&&BOOMR.now()>=n.expires))return n.items;this.removeLocalStorage(e)},setLocalStorage:function(e,t,n){var i,r,o;if(!e||!c.localStorageSupported||"object"!=typeof t)return!1;i={items:t};"number"==typeof n&&(i.expires=BOOMR.now()+1e3*n);if((r=u.JSON.stringify(i)).length<5e4){try{u.localStorage.setItem(c.LOCAL_STORAGE_PREFIX+e,r);if(r===(o=u.localStorage.getItem(c.LOCAL_STORAGE_PREFIX+e)))return!0}catch(e){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+r+"\n"+o)}else BOOMR.warn("Storage items too large: "+r.length+" "+r);return!1},removeLocalStorage:function(e){if(!e||!c.localStorageSupported)return!1;try{u.localStorage.removeItem(c.LOCAL_STORAGE_PREFIX+e);return!0}catch(e){}return!1},cleanupURL:function(e,t){if(!e||BOOMR.utils.isArray(e))return"";c.strip_query_string&&(e=e.replace(/\?.*/,"?qs-redacted"));if(void 0!==t&&e&&e.length>t){var n=e.indexOf("?");e=-1!==n&&n<t?e.substr(0,n)+"?...":e.substr(0,t-3)+"..."}return e},hashQueryString:function(e,t){if(!e)return e;if(!e.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e);return""}e.match(/^\/\//)&&(e=location.protocol+e);if(!e.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+e);return""}t&&(e=e.replace(/#.*/,""));return BOOMR.utils.MD5?e.replace(/\?([^#]*)/,function(e,t){return"?"+(10<t.length?BOOMR.utils.MD5(t):t)}):e},pluginConfig:function(e,t,n,i){var r,o=0;if(!t||!t[n])return!1;for(r=0;r<i.length;r++)if(void 0!==t[n][i[r]]){e[i[r]]=t[n][i[r]];o++}return 0<o},arrayFilter:function(e,t){var n=[];if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof t)return n;if("function"==typeof e.filter)n=e.filter(t);else for(var i,r=-1,o=e.length;++r<o;)t(i=e[r],r,e)&&(n[n.length]=i);return n},arrayFind:function(e,t){if((this.isArray(e)||e&&"number"==typeof e.length)&&"function"==typeof t){if("function"==typeof e.find)return e.find(t);for(var n,i=-1,r=e.length;++i<r;)if(t(n=e[i],i,e))return n}},isMutationObserverSupported:function(){return!(u&&u.navigator&&u.navigator.userAgent&&u.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&u&&u.MutationObserver&&"function"==typeof u.MutationObserver},addObserver:function(e,t,n,i,r,o){var a={observer:null,timer:null};if(!this.isMutationObserverSupported()||!i||!e)return null;function s(e){var t=!1;if(a.timer){clearTimeout(a.timer);a.timer=null}i&&((t=i.call(o,e,r))||(i=null));if(!t&&a.observer){a.observer.disconnect();a.observer=null}"number"==typeof t&&0<t&&(a.timer=setTimeout(s,t))}a.observer=new BOOMR.window.MutationObserver(s);n&&(a.timer=setTimeout(s,a.timeout));a.observer.observe(e,t);return a},addListener:function(e,t,n,i){var r=!1;if(e.addEventListener){i&&BOOMR.browser.supportsPassive()&&(r={capture:!1,passive:!0});e.addEventListener(t,n,r)}else e.attachEvent&&e.attachEvent("on"+t,n);c.listenerCallbacks[t]=c.listenerCallbacks[t]||[];c.listenerCallbacks[t].push({el:e,fn:n})},removeListener:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n);if(c.listenerCallbacks.hasOwnProperty(t))for(var i=0;i<c.listenerCallbacks[t].length;i++)if(n===c.listenerCallbacks[t][i].fn&&e===c.listenerCallbacks[t][i].el){c.listenerCallbacks[t].splice(i,1);return}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(e,t){var n;if(void 0===e||void 0===t||!t.length)return!1;for(n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},getQueryParamValue:function(e,t){var n,i,r,o;if(!e)return null;"string"==typeof t?(n=BOOMR.window.document.createElement("a")).href=t:n="object"==typeof t&&"string"==typeof t.search?t:BOOMR.window.location;i=n.search.slice(1).split(/&/);for(r=0;r<i.length;r++)if(i[r]&&(o=i[r].split("=")).length&&o[0]===e)return 1<o.length?decodeURIComponent(o.splice(1).join("=").replace(/\+/g," ")):"";return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},generateId:function(e){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,e||40).replace(/x/g,function(e){return"0"===(e=(Math.random()||.01).toString(36))?"0":e.substr(2,1)})},serializeForUrl:function(e){if(BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl)return BOOMR.utils.Compression.jsUrl(e);if(window.JSON)return JSON.stringify(e);BOOMR.debug("JSON is not supported");return""},getMyURL:function(){var t,e=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(e)return e.src;var n,i=document.getElementsByTagName("script");for(n=i.length;n--;)if("interactive"===i[n].readyState)return i[n].src;try{throw new Error}catch(e){if("stack"in e&&(t=this.arrayFilter(e.stack.split(/\n/),function(e){return e.match(/https?:\/\//)}))&&t.length)return t[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var e=void 0!==u.pageXOffset,t="CSS1Compat"===(u.document.compatMode||""),n={x:0,y:0};if(e)if("function"==typeof u.pageXOffset){n.x=u.pageXOffset();n.y=u.pageYOffset()}else{n.x=u.pageXOffset;n.y=u.pageYOffset}else if(t){n.x=u.document.documentElement.scrollLeft;n.y=u.document.documentElement.scrollTop}else{n.x=u.document.body.scrollLeft;n.y=u.document.body.scrollTop}"number"==typeof n.sx&&(n.sx=Math.round(n.sx));"number"==typeof n.sy&&(n.sy=Math.round(n.sy));return n},windowHeight:function(){return u.innerHeight||u.document.documentElement.clientHeight||u.document.body.clientHeight},windowWidth:function(){return u.innerWidth||u.document.documentElement.clientWidth||u.document.body.clientWidth},isNative:function(e){return!!e&&e.toString&&!e.hasOwnProperty("toString")&&/\[native code\]/.test(String(e))}},browser:{results:{},supportsPassive:function(){if(void 0===BOOMR.browser.results.supportsPassive){BOOMR.browser.results.supportsPassive=!1;if(!Object.defineProperty)return!1;try{var e=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,e)}catch(e){}}return BOOMR.browser.results.supportsPassive}},init:function(e){var t,n,i=["autorun","beacon_auth_key","beacon_auth_token","beacon_with_credentials","beacon_disable_sendbeacon","beacon_url","beacon_url_force_https","beacon_type","site_domain","strip_query_string","user_ip"];BOOMR_check_doc_domain();void 0!==(e=e||{}).log&&(this.log=e.log);this.log||(this.log=function(){});if(!this.pageId){this.pageId=BOOMR.utils.generateId(8);BOOMR.debug("Generated PageID: "+this.pageId)}if(e.primary&&c.handlers_attached)return this;void 0!==e.site_domain&&(this.session.domain=e.site_domain);void 0!==e.autorun&&(c.autorun=e.autorun);for(n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(e[n]&&e[n].hasOwnProperty("enabled")&&!1===e[n].enabled){c.disabled_plugins[n]=1;"function"==typeof this.plugins[n].disable&&this.plugins[n].disable();continue}if(c.disabled_plugins[n]){if(!e[n]||!e[n].hasOwnProperty("enabled")||!0!==e[n].enabled)continue;"function"==typeof this.plugins[n].enable&&this.plugins[n].enable();delete c.disabled_plugins[n]}if("function"==typeof this.plugins[n].init)try{this.plugins[n].init(e)}catch(e){BOOMR.addError(e,n+".init")}}for(t=0;t<i.length;t++)void 0!==e[i[t]]&&(c[i[t]]=e[i[t]]);if(!c.handlers_attached&&!e.wait||c.handlers_attached&&c.waiting_for_config){if(!c.onloadfired&&(void 0===c.autorun||!1!==c.autorun)){BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0);BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}c.waiting_for_config=!1}if(c.handlers_attached)return this;e.wait&&(c.waiting_for_config=!0);BOOMR.attach_page_ready(function(){BOOMR.t_onload||(BOOMR.t_onload=BOOMR.now())});BOOMR.utils.addListener(u,"DOMContentLoaded",function(){c.fireEvent("dom_loaded")});BOOMR.fireEvent("config",e);BOOMR.subscribe("config",function(e){e.beacon_url&&(c.beacon_url=e.beacon_url)});BOOMR.subscribe("spa_navigation",c.spaNavigation,null,c);!function(){var e,t;if(void 0!==r){BOOMR.utils.addListener(l,r,function(){c.fireEvent("visibility_changed")});c.lastVisibilityState=BOOMR.visibilityState();BOOMR.subscribe("visibility_changed",function(){var e=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[e]=BOOMR.now();BOOMR.debug("Visibility changed from "+c.lastVisibilityState+" to "+e);if("prerender"===c.lastVisibilityState&&"prerender"!==e){BOOMR.addVar("vis.pre","1");c.fireEvent("prerender_to_visible")}c.lastVisibilityState=e})}BOOMR.utils.addListener(l,"mouseup",c.xb_handler("click"));e=l.getElementsByTagName("form");for(t=0;t<e.length;t++)BOOMR.utils.addListener(e[t],"submit",c.xb_handler("form_submit"));u.onpagehide||null===u.onpagehide||BOOMR.utils.addListener(u,"unload",function(){BOOMR.window=u=null})}();c.handlers_attached=!0;return this},attach_page_ready:function(e){BOOMR.hasBrowserOnloadFired()?this.setImmediate(e,null,null,BOOMR):u.onpagehide||null===u.onpagehide?BOOMR.utils.addListener(u,"pageshow",e):BOOMR.utils.addListener(u,"load",e)},page_ready_autorun:function(e){c.autorun&&BOOMR.page_ready(e,!0)},page_ready:function(e,t){var n;if(!t&&"number"==typeof e){n=e;e=null}e=(e=e||u.event)||{name:"load"};if(t){if("number"==typeof u.BOOMR_page_ready){e.timing=e.timing||{};e.timing.loadEventEnd=u.BOOMR_page_ready;BOOMR.addVar("pr",1,!0)}}else{e.timing=e.timing||{};n?e.timing.loadEventEnd=n:"number"==typeof u.BOOMR_page_ready?e.timing.loadEventEnd=u.BOOMR_page_ready:e.timing.loadEventEnd=BOOMR.now();BOOMR.addVar("pr",1,!0)}if(c.onloadfired)return this;c.fireEvent("page_ready",e);c.onloadfired=!0;return this},hasBrowserOnloadFired:function(){var e=BOOMR.getPerformance();return l.readyState&&"complete"===l.readyState||e&&e.timing&&0<e.timing.loadEventStart||0<u.BOOMR_onload},onloadFired:function(){return c.onloadfired},setImmediate:function(e,t,n,i){var r;r=function(){e.call(i||null,t,n||{},void 0);r=null};u.requestIdleCallback?u.requestIdleCallback(r,{timeout:1e3}):u.setImmediate?u.setImmediate(r):setTimeout(r,10)},now:Date.now||function(){return(new Date).getTime()},getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(e){}},hrNow:function(){var e,t,n=BOOMR.getPerformance();if(n&&n.now)e=n.now();else{t=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start;e=BOOMR.now()-t}return e},visibilityState:void 0===e?function(){return"visible"}:function(){return l[e]},lastVisibilityEvent:{},registerEvent:function(e){if(c.events.hasOwnProperty(e))return this;c.events[e]=[];return this},disable:function(){c.clearEvents();c.clearListeners()},fireEvent:function(e,t){return c.fireEvent(e,t)},subscribe:function(n,i,r,o,e){var t,a,s;n=n.toLowerCase();c.translate_events[n]&&(n=c.translate_events[n]);c.events.hasOwnProperty(n)||(c.events[n]=[]);s=c.events[n];for(t=0;t<s.length;t++)if((a=s[t])&&a.fn===i&&a.cb_data===r&&a.scope===o)return this;s.push({fn:i,cb_data:r||{},scope:o||null,once:e||!1});"page_ready"===n&&c.onloadfired&&c.autorun&&this.setImmediate(i,null,r,o);"page_unload"!==n&&"before_unload"!==n||function(){var e,t=s.length;e=function(e){i&&i.call(o,e||u.event,r);"page_unload"===n&&t===c.events[n].length&&BOOMR.real_sendBeacon()};"page_unload"===n&&(u.onpagehide||null===u.onpagehide?BOOMR.utils.addListener(u,"pagehide",e):BOOMR.utils.addListener(u,"unload",e));BOOMR.utils.addListener(u,"beforeunload",e)}();return this},addError:function(e,t,n){var i,r=BOOMR.plugins.Errors;BOOMR.error("Boomerang caught error: "+e+", src: "+t+", extra: "+n);if(r&&r.is_supported())if("string"==typeof e)r.send({message:e,extra:n,functionName:t,noStack:!0},r.VIA_APP,r.SOURCE_BOOMERANG);else{"string"==typeof t&&(e.functionName=t);void 0!==n&&(e.extra=n);r.send(e,r.VIA_APP,r.SOURCE_BOOMERANG)}else{if("string"!=typeof e){(i=String(e)).match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,""));e=i}void 0!==t&&(e="["+t+":"+BOOMR.now()+"] "+e);n&&(e+=":: "+n);c.errors[e]?c.errors[e]++:c.errors[e]=1}},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)||-2146828218===e.number},addVar:function(e,t,n){if("string"==typeof e)c.vars[e]=t;else if("object"==typeof e){var i,r=e;for(i in r)r.hasOwnProperty(i)&&(c.vars[i]=r[i])}n&&(c.singleBeaconVars[e]=1);return this},appendVar:function(e,t){var n=BOOMR.getVar(e)||"";n&&(n+=",");BOOMR.addVar(e,n+t);return this},removeVar:function(e){var t,n;if(!arguments.length)return this;n=1===arguments.length&&BOOMR.utils.isArray(e)?e:arguments;for(t=0;t<n.length;t++)c.vars.hasOwnProperty(n[t])&&delete c.vars[n[t]];return this},hasVar:function(e){return c.vars.hasOwnProperty(e)},getVar:function(e){return c.vars[e]},setVarPriority:function(e,t){if("number"!=typeof t||1!==Math.abs(t))return this;c.varPriority[t][e]=1;return this},setReferrer:function(e){c.r=e},requestStart:function(t){var n=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+t,n);return{loaded:function(e){BOOMR.responseEnd(t,n,e)}}},readyToSend:function(){var e;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(c.disabled_plugins[e])continue;if("function"==typeof this.plugins[e].readyToSend&&!1===this.plugins[e].readyToSend()){BOOMR.debug("Plugin "+e+" is not ready to send");return!1}}return!0},responseEnd:function(e,t,n,i){t="number"==typeof t?t:BOOMR.now();i="number"==typeof i?i:BOOMR.now();if(BOOMR.readyToSend())if(BOOMR.hasSentPageLoadBeacon()||BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if("object"==typeof e){if(!e.url){BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");return}c.fireEvent("xhr_load",e)}else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",e);BOOMR.plugins.RT.startTimer("xhr_"+e,t);c.fireEvent("xhr_load",{name:"xhr_"+e,data:n,timing:{loadEventEnd:i}})}else BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(e,t,n,i)},null,BOOMR,!0);else{BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again...");setTimeout(function(){BOOMR.responseEnd(e,t,n,i)},1e3)}},uninstrumentXHR:function(){},instrumentXHR:function(){},uninstrumentFetch:function(){},instrumentFetch:function(){},sendBeacon:function(e){e&&(c.beacon_url_override=e);if(!c.beaconQueued){c.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return!0},real_sendBeacon:function(){var e,t=[],n={};if(!c.beaconQueued)return!1;c.beaconQueued=!1;BOOMR.debug("Checking if we can send beacon");for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(c.disabled_plugins[e])continue;if(!this.plugins[e].is_complete(c.vars)){BOOMR.debug("Plugin "+e+" is not complete, deferring beacon send");return!1}}if(!(window&&window.Image&&window.navigator&&BOOMR.window)){BOOMR.debug("DOM not fully available, not sending a beacon");return!1}var i=BOOMR.utils.inArray(c.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),r=void 0===c.vars["http.initiator"]||i;c.vars.pgu||(c.vars.pgu=i?l.URL:l.URL.replace(/#.*/,""));c.vars.pgu=BOOMR.utils.cleanupURL(c.vars.pgu);c.vars.u&&!i||(c.vars.u=c.vars.pgu);c.vars.pgu===c.vars.u&&delete c.vars.pgu;c.r?c.vars.r=BOOMR.utils.cleanupURL(c.r):delete c.vars.r;c.vars.v=BOOMR.version;if(BOOMR.session.enabled){c.vars["rt.si"]=BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36);c.vars["rt.ss"]=BOOMR.session.start;c.vars["rt.sl"]=BOOMR.session.length}if(BOOMR.visibilityState()){c.vars["vis.st"]=BOOMR.visibilityState();BOOMR.lastVisibilityEvent.visible&&(c.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible);BOOMR.lastVisibilityEvent.hidden&&(c.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)}c.vars["ua.plt"]=navigator.platform;c.vars["ua.vnd"]=navigator.vendor;this.pageId&&(c.vars.pid=this.pageId);c.vars.n=++this.beaconsSent;if(u!==window){"if";c.vars.if=""}for(e in c.errors)c.errors.hasOwnProperty(e)&&t.push(e+(1<c.errors[e]?" (*"+c.errors[e]+")":""));0<t.length&&(c.vars.errors=t.join("\n"));c.errors={};c.fireEvent("before_beacon",c.vars);for(e in c.vars)c.vars.hasOwnProperty(e)&&(n[e]=c.vars[e]);BOOMR.removeVar(["qt","pgu"]);for(var o in c.singleBeaconVars)c.singleBeaconVars.hasOwnProperty(o)&&BOOMR.removeVar(o);c.singleBeaconVars={};if(!c.hasSentPageLoadBeacon&&r){c.hasSentPageLoadBeacon=!0;BOOMR.setImmediate(function(){c.fireEvent("page_load_beacon",n)})}if(BOOMR.session.rate_limited){BOOMR.debug("Skipping because we're rate limited");return!1}BOOMR.sendBeaconData(n);return!0},hasSentPageLoadBeacon:function(){return c.hasSentPageLoadBeacon},sendBeaconData:function(e){var t,n,i,r,o,a=[],s=!0;BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(e));c.beacon_url=c.beacon_url_override||c.beacon_url;if(!c.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return!1}if(!c.beaconUrlAllowed(c.beacon_url)){BOOMR.debug("Beacon URL not allowed: "+c.beacon_url);return!1}if(0===e.length)return!1;c.fireEvent("beacon",e);a=this.getVarsOfPriority(e,-1);t=this.getVarsOfPriority(e,1);n=a.concat(this.getVarsOfPriority(e,0),t).join("&");c.beacon_url_force_https&&c.beacon_url.match(/^\/\//)&&(c.beacon_url="https:"+c.beacon_url);i=c.beacon_url+(-1<c.beacon_url.indexOf("?")?"&":"?")+n;if("GET"===c.beacon_type){s=!0;i.length>BOOMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("Boomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")}else("POST"===c.beacon_type||i.length>BOOMR.constants.MAX_GET_LENGTH)&&(s=!1);if(u&&u.navigator&&"function"==typeof u.navigator.sendBeacon&&BOOMR.utils.isNative(u.navigator.sendBeacon)&&"function"==typeof u.Blob&&"GET"!==c.beacon_type&&void 0===c.beacon_auth_token&&!c.beacon_disable_sendbeacon){var l=new u.Blob([n+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(u.navigator.sendBeacon(c.beacon_url,l))return!0}BOOMR.orig_XMLHttpRequest||u&&u.XMLHttpRequest||(s=!0);if(s){try{r=new Image}catch(e){BOOMR.debug("Image is not a constructor, not sending a beacon");return!1}r.src=i}else{o=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(o,n)}catch(e){o=new BOOMR.boomerang_frame.XMLHttpRequest;this.sendXhrPostBeacon(o,n)}}return!0},hasSentPageLoadBeacon:function(){return c.hasSentPageLoadBeacon},sendXhrPostBeacon:function(e,t){e.open("POST",c.beacon_url);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(void 0!==c.beacon_auth_token){void 0===c.beacon_auth_key&&(c.beacon_auth_key="Authorization");e.setRequestHeader(c.beacon_auth_key,c.beacon_auth_token)}c.beacon_with_credentials&&(e.withCredentials=!0);e.send(t)},getVarsOfPriority:function(e,t){var n,i=[],r=0!==t?c.varPriority[t]:e;for(n in r)if(r.hasOwnProperty(n)&&e.hasOwnProperty(n)){i.push(this.getUriEncodedVar(n,void 0===e[n]?"":e[n]));0!==t&&delete e[n]}return i},getUriEncodedVar:function(e,t){null==t&&(t="");"object"==typeof t&&(t=BOOMR.utils.serializeForUrl(t));return encodeURIComponent(e)+"="+encodeURIComponent(t)},getResourceTiming:function(e,t,n){var i,r=BOOMR.getPerformance();try{if(r&&"function"==typeof r.getEntriesByName){if(!(i=r.getEntriesByName(e))||!i.length)return;if(!("function"!=typeof n||(i=BOOMR.utils.arrayFilter(i,n))&&i.length))return;1<i.length&&"function"==typeof t&&i.sort(t);return i[i.length-1]}}catch(e){BOOMR.warn("getResourceTiming:"+e)}}}).url=t.utils.getMyURL();delete BOOMR_start;if("number"==typeof BOOMR_lstart){t.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else"number"==typeof BOOMR.window.BOOMR_lstart&&(t.t_lstart=BOOMR.window.BOOMR_lstart);"number"==typeof BOOMR.window.BOOMR_onload&&(t.t_onload=BOOMR.window.BOOMR_onload);!function(){var e;"object"==typeof console&&void 0!==console.log?t.log=function(e,t,n){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+n+": ["+t+"] "+e)}:t.log=function(){};e=function(n){return function(e,t){this.log(e,n,"boomerang"+(t?"."+t:""));return this}};t.debug=e("debug");t.info=e("info");t.warn=e("warn");t.error=e("error")}();try{var i=t.getPerformance();i&&"function"==typeof i.now&&/\[native code\]/.test(String(i.now))&&i.timing&&i.timing.navigationStart&&(t.now=function(){return Math.round(i.now()+i.timing.navigationStart)})}catch(e){}c.checkLocalStorageSupport();!function(){var e;for(e in t)t.hasOwnProperty(e)&&(BOOMR[e]=t[e]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}();a("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);!function(){if(!BOOMR.plugins.PaintTiming){var o={"first-paint":"fp","first-contentful-paint":"fcp"},a={initialized:!1,complete:!1,supported:null,timingCache:{},done:function(e,t){var n,i,r;if(this.complete)return this;if("load"!==t&&(!e||"spa_hard"!==e.initiator)){this.complete=!0;return this}if((n=BOOMR.getPerformance())&&"function"==typeof n.getEntriesByType){if((i=n.getEntriesByType("paint"))&&i.length){BOOMR.info("This user agent supports PaintTiming","pt");for(r=0;r<i.length;r++){a.timingCache[i[r].name]=i[r].startTime;o[i[r].name]&&BOOMR.addVar("pt."+o[i[r].name],Math.floor(i[r].startTime),!0)}this.complete=!0;BOOMR.sendBeacon()}}else this.complete=!0}};BOOMR.plugins.PaintTiming={init:function(){if(!this.is_supported()){a.complete=!0;a.initialized=!0}if(!a.complete&&"hidden"===BOOMR.visibilityState()){BOOMR.addVar("pt.hid",1,!0);a.complete=!0}if(!a.initialized){BOOMR.subscribe("page_ready",a.done,"load",a);BOOMR.subscribe("xhr_load",a.done,"xhr",a);BOOMR.subscribe("before_unload",a.done,null,a);a.initialized=!0}return this},is_complete:function(){return!0},is_enabled:function(){return a.initialized&&this.is_supported()},is_supported:function(){if(null!==a.supported)return a.supported;var e=BOOMR.getPerformance();a.supported=e&&void 0!==window.PerformancePaintTiming&&"function"==typeof e.getEntriesByType;return a.supported},getTimingFor:function(e){var t,n;if(a.timingCache[e])return a.timingCache[e];if(this.is_supported()){var i;if((i=BOOMR.getPerformance())&&"function"==typeof i.getEntriesByType&&(t=i.getEntriesByType("paint"))&&t.length)for(n=0;n<t.length;n++)if(t[n].name===e){a.timingCache[e]=t[n].startTime;return a.timingCache[e]}}}}}}();!function(){if(!BOOMR.plugins.Continuity){function t(u){var c={},i={},r=[],o=0,a=0,s=0;BOOMR.fpsLog&&BOOMR.fpsLog.length&&(u=BOOMR.fpsLog[0]+y);function l(){return Math.floor((BOOMR.now()-u)/M)}function d(){var e=0;if(impl.ttiWaitForFrameworkReady){if(!impl.frameworkReady)return;e=impl.frameworkReady}if(BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&g&&g.timeOrigin){var t=BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint");(t=t||BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(e=Math.max(e,Math.round(t+g.timeOrigin)))}else if(g&&g.timing&&g.timing.msFirstPaint)e=Math.max(e,g.timing.msFirstPaint);else if(BOOMR.window&&BOOMR.window.chrome&&"function"==typeof BOOMR.window.chrome.loadTimes){var n=BOOMR.window.chrome.loadTimes();n&&n.firstPaintTime&&(e=Math.max(e,1e3*n.firstPaintTime))}g&&g.timing&&g.timing.domContentLoadedEventEnd&&(e=Math.max(e,g.timing.domContentLoadedEventEnd));impl.ttiWaitForHeroImages&&(s=function(e){var t,n,i,r,o,a,s=0;if(!BOOMR.window||!BOOMR.window.document||"function"!=typeof BOOMR.window.document.querySelectorAll)return 0;if(!g||"function"!=typeof g.getEntriesByType)return 0;t=e+", "+e+" * img, "+e+" * image";if((n=BOOMR.window.document.querySelectorAll(t))&&n.length)for(i=0;i<n.length;i++)if((o=n[i].currentSrc||n[i].src||"function"==typeof n[i].getAttribute&&n[i].getAttribute("xlink:href"))&&(a=g.getEntriesByName(o))&&a.length)for(r=0;r<a.length;r++)s=Math.max(s,a[r].responseEnd);return s?Math.floor(s+y):0}(impl.ttiWaitForHeroImages))&&(e=Math.max(e,s));return e}function f(e,t){return function(e,t,n,i,r){var o,a,s,l,u,c="",d=0;if(!n||!BOOMR.utils.Compression)return"";if(0===n.length)return"";if(t){void 0===n[i]&&(n[i]=0);for(o=i+1;o<=r;o++)void 0===n[o]&&(n[o]=n[o-1])}for(o=i;o<=r;o++){d="number"!=typeof n[o]||isNaN(n[o])?0:n[o];e===B?s=d<=63?p.charAt(d):m+d.toString(36)+m:e===O?s=d.toString(36):e===v&&(s=d<99?d<=9?"0"+Math.max(d,0):d:"__");if(o+3<=r&&(n[o+1]===d||0===d&&void 0===n[o+1])&&(n[o+2]===d||0===d&&void 0===n[o+2])&&(n[o+3]===d||0===d&&void 0===n[o+3])){a=1;for(;o<r&&(n[o+1]===d||0===d&&void 0===n[o+1]);){a++;o++}l="*"+a.toString(36)+"*"+s}else l=s;if(0!==d||o!==r){e===O&&u&&(c+=",");u=!0;c+=l}}return u?e.toString()+c:""}(i[e].compressMode,i[e].backfillLast,c[e],0!==t?Math.floor((t-u)/M):0,l())}R.timeToInteractive=function(){if(o)return o-y};R.timeToVisuallyReady=function(){if(a)return a-y};R.timeToHeroImagesReady=function(){if(impl.ttiWaitForHeroImages&&s)return s-y};R.timeToFrameworkReady=function(){if(impl.ttiWaitForFrameworkReady&&impl.frameworkReady)return impl.frameworkReady-y};R.log=function(){return r};return{register:function(e,t,n){c[e]||(c[e]=[]);i[e]={compressMode:t||B,backfillLast:n}},set:function(e,t,n){void 0===n&&(n=l());c[e]&&(c[e][n]=t)},log:function(e,t,n){void 0===t&&(t=l());r.push({type:e,time:t,val:n});r.length>impl.logMaxEntries&&Array.prototype.splice.call(r,0,r.length-impl.logMaxEntries)},increment:function(e,t,n){void 0===n&&(n=l());void 0===t&&(t=1);if(c[e]){c[e][n]||(c[e][n]=0);c[e][n]+=t}},getTimeBucket:l,getStats:function(e,t){var n,i=0,r=0,o=1/0,a=0,s=Math.floor((t-u)/M);if(!c[e])return 0;for(var l in c[e])if(s<=(l=parseInt(l,10))&&c[e].hasOwnProperty(l)){i++;r+=n=c[e][l];o=Math.min(o,n);a=Math.max(a,n)}return{total:r,count:i,min:o,max:a}},analyze:function(e){var t=l(),n=0,i=0;impl.sendLog&&void 0!==e&&function(){for(var e="",t=0;t<r.length;t++){var n=r[t];0!==t&&(e+="|");e+=n.type;e+=Math.round(n.time-y).toString(36);for(var i in n.val)if(n.val.hasOwnProperty(i)){e+=","+i;"number"==typeof n.val[i]?e+=n.val[i].toString(36):e+=n.val[i]}}""!==e&&impl.addToBeacon("c.l",e)}();impl.sendTimeline&&void 0!==e&&function(e){var t,n;for(t in c)c.hasOwnProperty(t)&&""!==(n=f(t,e))&&impl.addToBeacon("c.t."+t,n)}(e);if(!o&&(a=a||d())){impl.addToBeacon("c.tti.vr",R.timeToVisuallyReady());impl.addToBeacon("c.tti.fr",R.timeToFrameworkReady());impl.addToBeacon("c.tti.hi",R.timeToHeroImagesReady());if(c.longtask||c.fps||c.busy){for(n=Math.floor((a-u)/M);n<=t;n++)if(c.longtask&&c.longtask[n])i=0;else if(c.fps&&(!c.fps[n]||c.fps[n]<2))i=0;else if(c.busy&&50<c.busy[n])i=0;else if(c.interdly&&c.interdly[n])i=0;else if(5<=++i){o=u+(n-5)*M;o=Math.max(o,a);break}0<o&&impl.addToBeacon("c.tti",R.timeToInteractive())}}},stop:function(){c={};r=[]},onBeacon:function(){for(var e in c)c.hasOwnProperty(e)&&(c[e]=[]);r=[]}}}function n(e,i){if(e.PerformanceObserver&&e.PerformanceLongTaskTiming){var d={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},f={unknown:0,script:1,layout:2},O={unknown:0,iframe:1,embed:2,object:3},t=new e.PerformanceObserver(function(e){var t,n;if(!r)return;t=e.getEntries();Array.prototype.push.apply(p,t);for(n=0;n<t.length;n++)o+=t[n].duration;i.increment("longtask",t.length)});try{t.observe({entryTypes:["longtask"]})}catch(e){return}i.register("longtask",B);var p=[],r=!0,o=0;R.longTasksTime=function(){return o};R.longTasksCount=function(){return p.length};return{getTasks:function(){return p},clearTasks:n,analyze:function(e){var t,n,i,r,o,a=[],s=[];if(0!==p.length){for(t=0;t<p.length;t++){i=p[t];r={s:Math.round(i.startTime).toString(36),d:Math.round(i.duration).toString(36),n:d[i.name]?d[i.name]:0};s=[];for(n=0;n<i.attribution.length;n++)if("script"!==(o=i.attribution[n]).name||"iframe"!==o.containerType||o.containerName||o.containerId||o.containerSrc){var l=o.containerName?o.containerName:void 0,u=o.containerId?o.containerId:void 0;l===u&&(l=void 0);var c=void 0===u?o.containerSrc:void 0;s.push({a:f[o.name]?f[o.name]:0,t:O[o.containerType]?O[o.containerType]:0,n:l,i:u,s:c})}0<s.length&&(r.a=s);a.push(r)}impl.addToBeacon("c.lt.n",R.longTasksCount(),!0);impl.addToBeacon("c.lt.tt",R.longTasksTime());impl.addToBeacon("c.lt",function(e){var t=window.UserTimingCompression||BOOMR.window.UserTimingCompression;return t?t.jsUrl(e):window.JSON?JSON.stringify(e):""}(a))}},stop:function(){r=!1;t.disconnect();n()},onBeacon:function(){n()}}}function n(){p=[];o=0}}function i(e,i){i.register("busy",v);var r=Math.floor(3.125),o=BOOMR.now(),a=0,s=0,l=0,u=0,t=!1,n=!1;R.pageBusy=function(){return 0===l?0:Math.round(u/l*100)};t=setInterval(function(){var e=BOOMR.now(),t=e-o;o=e;if(68<t){var n=Math.floor((t-32)/32);a+=n;s+=n;t-=32*n}a++;36<t&&s++},32);n=setInterval(function(){var e=i.getTimeBucket(),t=e,n=0;if(0!==a){for(;r+1<a&&n<=100;){i.set("busy",100,--t);a-=r;s=Math.max(s-r,0);l+=r;u+=r;n++}l+=a;u+=s;i.set("busy",Math.round(s/a*100),e);s=a=0}},100);return{analyze:function(e){impl.addToBeacon("c.b",R.pageBusy())},stop:function(){!1;if(t){clearInterval(t);t=!1}if(n){clearInterval(n);n=!1}},onBeacon:function(){u=l=0}}}function r(n,i){i.register("fps",B);var t,r,o=50,a=0,s=0,l=!0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){r=t=BOOMR.fpsLog[0]+y;for(var e=0;e<BOOMR.fpsLog.length;e++){var u=y+BOOMR.fpsLog[e];i.increment("fps",1,Math.floor((u-t)/M));o<=u-r&&s++;r=u}a=BOOMR.fpsLog.length;delete BOOMR.fpsLog}else t=BOOMR.now();n.requestAnimationFrame(function e(t){if(l){o<=t-r&&s++;r=t;a++;i.increment("fps");n.requestAnimationFrame(e)}});R.fps=function(){var e=R.fpsDuration();if(e)return Math.floor(a/(e/1e3))};R.fpsDuration=function(){if(t)return BOOMR.now()-t};R.fpsMinimum=function(){if(R.fpsDuration()){var e=i.getStats("fps",t).min;return e!==1/0?e:void 0}};R.fpsLongFrames=function(){return s};R.fpsStart=function(){return t?t.toString(36):0};return{analyze:function(e){impl.addToBeacon("c.f",R.fps());impl.addToBeacon("c.f.d",R.fpsDuration());impl.addToBeacon("c.f.m",R.fpsMinimum());impl.addToBeacon("c.f.l",R.fpsLongFrames());impl.addToBeacon("c.f.s",R.fpsStart())},stop:function(){l=!1;t=0},onBeacon:function(){l&&(t=BOOMR.now());s=a=0}}}function o(e,r,o){if(e&&e.document&&e.document.body&&e.document.documentElement){var a=2e3,s=20,l=0,u=0,c=0,d=0,f=0,O=0,p=0,m=0,t=!1,n=e.document.body,i=e.document.documentElement;r.register("scroll",B);r.register("scrollpct",v);var g=Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)-BOOMR.utils.windowHeight();R.scrollPct=function(){return d};R.scrollCount=function(){return f};R.scrollDistinct=function(){return p};R.scrollPixels=function(){return O};BOOMR.utils.addListener(e,"scroll",h,!0);t=setInterval(function(){var e=Math.min(c,100);0!==e&&r.set("scrollpct",e);c=0},M);return{analyze:function(e){impl.addToBeacon("c.s",R.scrollCount());impl.addToBeacon("c.s.p",R.scrollPct());impl.addToBeacon("c.s.y",R.scrollPixels());impl.addToBeacon("c.s.d",R.scrollDistinct())},stop:function(){if(t){clearInterval(t);t=!1}BOOMR.utils.removeListener(e,"scroll",h)},onBeacon:function(){p=O=f=d=0}}}function h(e){var t=BOOMR.now();f++;a<t-m&&p++;m=t;var n=BOOMR.utils.scroll().y,i=Math.abs(l-n);O+=i;r.increment("scroll",i);if(0===u||Math.abs(u-n)>s){r.log(0,t,{y:n});u=n}o.interact("scroll",t,e);c+=Math.round(i/g*100);d+=Math.round(i/g*100);l=n}}function a(e,o,a){o.register("click",B);var s=10,l=3,u=0,c=0,d=0,f=0,O=0,p=null;function t(e){var t=BOOMR.now(),n=e.clientX,i=e.clientY;u++;var r=Math.round(Math.sqrt(Math.pow(O-i,2)+Math.pow(f-n,2)));if(p===e.target||r<=s){if(l<=++c+1){d++;BOOMR.fireEvent("rage_click",e)}}else c=0;f=n;O=i;p=e.target;o.increment("click");o.log(1,t,{x:n,y:i});a.interact("click",t,e)}R.clicksCount=function(){return u};R.clicksRage=function(){return d};BOOMR.utils.addListener(e.document,"click",t,!0);return{analyze:function(e){impl.addToBeacon("c.c",R.clicksCount());impl.addToBeacon("c.c.r",R.clicksRage())},stop:function(){BOOMR.utils.removeListener(e.document,"click",t)},onBeacon:function(){d=c=u=0}}}function s(e,n,i){n.register("key",B);var r=0,o=0;function t(e){var t=BOOMR.now();r++;27===e.keyCode&&o++;n.increment("key");n.log(3,t);i.interact("key",t,e)}R.keyCount=function(){return r};R.keyEscapes=function(){return o};BOOMR.utils.addListener(e.document,"keydown",t,!0);return{analyze:function(e){impl.addToBeacon("c.k",R.keyCount());impl.addToBeacon("c.k.e",R.keyEscapes())},stop:function(){BOOMR.utils.removeListener(e.document,"keydown",t)},onBeacon:function(){o=r=0}}}function l(e,o,t){o.register("mouse",B);o.register("mousepct",v);var a=0,s=0,n=0,i=0,l=0,u=0,c=0,r=!1,d=!1,f=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));function O(e){BOOMR.now();var t=e.clientX,n=e.clientY,i=Math.round(Math.sqrt(Math.pow(s-n,2)+Math.pow(a-t,2))),r=Math.round(i/f*100);l+=r;u+=r;c+=i;a=t;s=n;o.increment("mouse",i)}R.mousePct=function(){return u};R.mousePixels=function(){return c};r=setInterval(function(){var e=Math.min(l,100);0!==e&&o.set("mousepct",e);l=0},M);d=setInterval(function(){if(n!==a||i!==s){if(10<=Math.round(Math.sqrt(Math.pow(i-s,2)+Math.pow(n-a,2)))){o.log(2,BOOMR.now(),{x:a,y:s});n=a;i=s}}},250);BOOMR.utils.addListener(e.document,"mousemove",O,!0);return{analyze:function(e){impl.addToBeacon("c.m.p",R.mousePct());impl.addToBeacon("c.m.n",R.mousePixels())},stop:function(){if(r){clearInterval(r);r=!1}if(d){clearInterval(d);d=!1}BOOMR.utils.removeListener(e.document,"mousemove",O)},onBeacon:function(){c=u=0}}}function u(e,r,t){r.register("inter",B);r.register("interdly",B);var o=t,a=0,s=null,l=0,u=0,c=0,d=0,f=!0,O=0,p=0,m=!1,g=!1,h=!1;function n(){if(m){clearTimeout(m);m=!1}if(g){clearTimeout(g);g=!1}}function M(){_("Sending interaction beacon");n();BOOMR.fireEvent("interaction");impl.addToBeacon("rt.tstart",O);impl.addToBeacon("rt.end",p);impl.addToBeacon("rt.start","manual");impl.addToBeacon("http.initiator","interaction");BOOMR.sendBeacon()}R.interactionDelayed=function(){return c};R.interactionDelayedTime=function(){return Math.round(d)};R.interactionAvgDelay=function(){if(0<l)return Math.round(u/l)};R.timeToFirstInteraction=function(){if(a)return a-y};R.firstInputDelay=function(){if(null!==s)return s};BOOMR.subscribe("spa_init",function(){h=!0;n()},null,impl);return{interact:function(e,t,n){t=t||BOOMR.now();if(f){l++;a=a||t;var i=0;if(n&&n.timeStamp){i=14e11<n.timeStamp?t-n.timeStamp:t-y-n.timeStamp;u+=i;null===s&&(s=Math.round(i));if(50<i){r.increment("interdly");c++;d+=i}}r.increment("inter");if(!h&&impl.afterOnloadMonitoring){p=BOOMR.now();if(!O){_("Interaction detected, sending a beacon after "+o+" ms");O=p;g=setTimeout(M,3e4)}if(m){_("Clearing previous interaction timeout");clearTimeout(m);m=!1}m=setTimeout(M,o)}}},analyze:function(e){impl.addToBeacon("c.ttfi",R.timeToFirstInteraction());impl.addToBeacon("c.i.dc",R.interactionDelayed());impl.addToBeacon("c.i.dt",R.interactionDelayedTime());impl.addToBeacon("c.i.a",R.interactionAvgDelay());null!==s&&impl.addToBeacon("c.fid",R.firstInputDelay(),!0)},stop:function(){f=!1},onBeacon:function(){p=O=u=l=c=d=0;h=!1;n()}}}function c(e,n,i){n.register("vis",B);var r={visible:0,hidden:1,prerender:2,unloaded:3},o=!0;BOOMR.subscribe("visibility_changed",function(e){var t=BOOMR.now();if(o){n.increment("vis");n.log(4,t,{s:r[BOOMR.visibilityState()]});i.interact("vis",t,e)}});return{stop:function(){o=!1}}}function d(e,r,o){r.register("orn",B);var a=!0;function t(e){var t=BOOMR.now(),n=window.orientation;if(a){r.increment("orn");var i=window.screen&&(screen.msOrientation||screen.orientation||screen.mozOrientation||{});i&&"number"==typeof i.angle&&(n=screen.orientation.angle);"number"==typeof n&&r.log(5,t,{a:n});o.interact("orn",t,e)}}BOOMR.utils.addListener(e,"orientationchange",t,!0);return{stop:function(){a=!1;BOOMR.utils.removeListener(e,"orientationchange",t)}}}function f(e,n){n.register("mem",O,!0);n.register("bat",v,!0);n.register("domsz",O,!0);n.register("domln",O,!0);n.register("mut",B);var t,i=e.document,r=!0,o=!1,a=null,s=0,l=0,u=i.getElementsByTagName("*");function c(){r&&a&&n.set("bat",a.level)}o=setInterval(function(){var e=g&&g.memory&&g.memory.usedJSHeapSize;e&&n.set("mem",e);l=u.length;n.set("domsz",i.documentElement.innerHTML.length);n.set("domln",l);if(0<s){var t=Math.min(Math.round(s/l*100),100);n.set("mut",t);s=0}},1e3);e.navigator&&"function"==typeof e.navigator.getBattery&&e.navigator.getBattery().then(function(e){(a=e).onlevelchange&&(a.onlevelchange=c)});BOOMR.utils.isMutationObserverSupported()&&(t=new e.MutationObserver(function(e){e.forEach(function(e){if("childList"===e.type)for(var t=0;t<e.addedNodes.length;t++){var n=e.addedNodes[t];s++;s+=n.getElementsByTagName?n.getElementsByTagName("*").length:0}})})).observe(i,{childList:!0,subtree:!0});return{stop:function(){r=!1;if(o){clearInterval(o);o=!1}t&&t.disconnect();a&&a.onlevelchange&&(a.onlevelchange=null);u=null}}}var M=100,B=0,O=1,v=2,p="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",m=".",g=BOOMR.getPerformance(),R={},y=g&&g.timing&&g.timing.navigationStart?g.timing.navigationStart:BOOMR.now();impl={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!0,afterOnload:!1,afterOnloadMaxLength:6e4,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,statsMonitor:null,addedVars:[],monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,onBeforeBeacon:function(){impl.runAllAnalyzers()},runAllAnalyzers:function(){var e,t;if(!impl.hasAddedDataToBeacon){for(e=0;e<impl.monitors.length;e++)(t=impl[impl.monitors[e]])&&"function"==typeof t.analyze&&t.analyze(impl.timeOfLastBeacon);impl.addToBeacon("c.lb",impl.timeOfLastBeacon?impl.timeOfLastBeacon.toString(36):0);impl.timeOfLastBeacon=BOOMR.now();impl.hasAddedDataToBeacon=!0}},onBeacon:function(){var e;if(impl.addedVars&&0<impl.addedVars.length){BOOMR.removeVar(impl.addedVars);impl.addedVars=[]}for(e=0;e<impl.monitors.length;e++){var t=impl[impl.monitors[e]];if(t){impl.afterOnload||"function"==typeof t.stop&&t.stop();"function"==typeof t.onBeacon&&t.onBeacon()}}impl.hasAddedDataToBeacon=!1},onXhrLoad:function(e){e&&BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(impl.isSpa=!0);e&&"spa_hard"===e.initiator&&impl.onPageReady()},onPageReady:function(){impl.firedPageReady=!0;if(impl.afterOnload&&impl.monitorInteractions){impl.afterOnloadMonitoring=!0;impl.isSpa||"number"!=typeof impl.afterOnloadMaxLength||setTimeout(function(){impl.afterOnloadMonitoring=!1},impl.afterOnloadMaxLength)}if(impl.waitAfterOnload){var t=BOOMR.now();setTimeout(function e(){if(BOOMR.now()-t>impl.waitAfterOnload){impl.complete=!0;BOOMR.sendBeacon()}else{impl.timeline.analyze();if(R.timeToInteractive()){impl.complete=!0;BOOMR.sendBeacon()}else setTimeout(e,500)}},500)}else impl.complete=!0},addToBeacon:function(e,t,n){if(0!==t&&void 0!==t||n){BOOMR.addVar(e,t);impl.addedVars.push(e)}else BOOMR.removeVar(e)}};BOOMR.plugins.Continuity={init:function(e){BOOMR.utils.pluginConfig(impl,e,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline"]);if(impl.initialized)return this;impl.initialized=!0;impl.timeline=new t(BOOMR.now());if(BOOMR.window){if(impl.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming){impl.longTaskMonitor=new n(BOOMR.window,impl.timeline);impl.ttiMethod="lt"}if(impl.monitorFrameRate&&"function"==typeof BOOMR.window.requestAnimationFrame){impl.frameRateMonitor=new r(BOOMR.window,impl.timeline);impl.ttiMethod||(impl.ttiMethod="raf")}if(impl.monitorPageBusy&&(!BOOMR.window.PerformanceObserver||!BOOMR.window.PerformanceLongTaskTiming||!impl.monitorLongTasks)){impl.pageBusyMonitor=new i(BOOMR.window,impl.timeline);impl.ttiMethod||(impl.ttiMethod="b")}if(impl.monitorInteractions){impl.interactionMonitor=new u(BOOMR.window,impl.timeline,impl.afterOnloadMinWait);impl.scrollMonitor=new o(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.keyMonitor=new s(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.clickMonitor=new a(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.mouseMonitor=new l(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.visibilityMonitor=new c(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.orientationMonitor=new d(BOOMR.window,impl.timeline,impl.interactionMonitor)}impl.monitorStats&&(impl.statsMonitor=new f(BOOMR.window,impl.timeline,impl.interactionMonitor))}BOOMR.addVar("c.e",y.toString(36));BOOMR.addVar("c.tti.m",impl.ttiMethod);BOOMR.subscribe("before_beacon",impl.onBeforeBeacon,null,impl);BOOMR.subscribe("beacon",impl.onBeacon,null,impl);BOOMR.subscribe("page_ready",impl.onPageReady,null,impl);BOOMR.subscribe("xhr_load",impl.onXhrLoad,null,impl);return this},is_complete:function(e){return impl.complete||e&&"error"===e["http.initiator"]},frameworkReady:function(){impl.frameworkReady=BOOMR.now()},metrics:R}}function _(e){BOOMR.debug(e,"Continuity")}}();!function(){if(!BOOMR.plugins.NavigationTiming){var c={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(e){var t;if(e&&"spa_hard"===e.initiator)c.done(e);else if(e&&"spa"===e.initiator)c.sendBeacon();else{BOOMR.window;var n,i,r={};if(e){e.data&&(e=e.data);if((t=BOOMR.getPerformance())&&e.restiming){r={nt_red_st:e.restiming.redirectStart,nt_red_end:e.restiming.redirectEnd,nt_fet_st:e.restiming.fetchStart,nt_dns_st:e.restiming.domainLookupStart,nt_dns_end:e.restiming.domainLookupEnd,nt_con_st:e.restiming.connectStart,nt_con_end:e.restiming.connectEnd,nt_req_st:e.restiming.requestStart,nt_res_st:e.restiming.responseStart,nt_res_end:e.restiming.responseEnd};e.restiming.secureConnectionStart&&(r.nt_ssl_st=e.restiming.secureConnectionStart);for(i in r)if(r.hasOwnProperty(i)&&r[i]){r[i]+=t.timing.navigationStart;r[i]=Math.floor(r[i])}}if(e.timing){n=e.timing;r.nt_req_st||(r.nt_req_st=n.requestStart);r.nt_res_st||(r.nt_res_st=n.responseStart);r.nt_res_end||(r.nt_res_end=n.responseEnd);r.nt_domint=n.domInteractive;r.nt_domcomp=n.domComplete;r.nt_load_st=n.loadEventEnd;r.nt_load_end=n.loadEventEnd}for(i in r)r.hasOwnProperty(i)&&!r[i]&&delete r[i];BOOMR.addVar(r);try{c.addedVars.push.apply(c.addedVars,Object.keys(r))}catch(e){}c.sendBeacon()}}},done:function(){var e,t,n,i,r,o,a=BOOMR.window,s={},l=0,u=!1;if(this.complete)return this;c.addedVars=[];if(e=BOOMR.getPerformance()){if("function"==typeof e.getEntriesByType)if((i=e.getEntriesByType("navigation"))&&i.length){BOOMR.info("This user agent supports NavigationTiming2","nt");i=i[0];l=e.timing?e.timing.navigationStart:0}else i=void 0;if(!i&&e.timing){BOOMR.info("This user agent supports NavigationTiming","nt");i=e.timing}if(i){!(s={nt_nav_st:e.timing?e.timing.navigationStart:0,nt_red_st:d(l,i.redirectStart),nt_red_end:d(l,i.redirectEnd),nt_fet_st:d(l,i.fetchStart),nt_dns_st:d(l,i.domainLookupStart),nt_dns_end:d(l,i.domainLookupEnd),nt_con_st:d(l,i.connectStart),nt_con_end:d(l,i.connectEnd),nt_req_st:d(l,i.requestStart),nt_res_st:d(l,i.responseStart),nt_res_end:d(l,i.responseEnd),nt_domloading:d(l,i.domLoading),nt_domint:d(l,i.domInteractive),nt_domcontloaded_st:d(l,i.domContentLoadedEventStart),nt_domcontloaded_end:d(l,i.domContentLoadedEventEnd),nt_domcomp:d(l,i.domComplete),nt_load_st:d(l,i.loadEventStart),nt_load_end:d(l,i.loadEventEnd),nt_unload_st:d(l,i.unloadEventStart),nt_unload_end:d(l,i.unloadEventEnd)}).nt_domloading&&e&&e.timing&&e.timing.domLoading&&(s.nt_domloading=e.timing.domLoading);i.secureConnectionStart&&(s.nt_ssl_st=d(l,i.secureConnectionStart));e.timing&&e.timing.msFirstPaint&&(s.nt_first_paint=e.timing.msFirstPaint);i.workerStart&&(s.nt_worker_start=d(l,i.workerStart));if(i.decodedBodySize||i.transferSize){s.nt_enc_size=i.encodedBodySize;s.nt_dec_size=i.decodedBodySize;s.nt_trn_size=i.transferSize}i.nextHopProtocol&&(s.nt_protocol=i.nextHopProtocol)}if(!s.nt_first_paint&&BOOMR.plugins.PaintTiming){u=BOOMR.plugins.PaintTiming.is_supported();(r=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(s.nt_first_paint=d(l,r))}if((!s.nt_protocol||!s.nt_first_paint)&&(!i||""!==i.nextHopProtocol)&&!u&&a.chrome&&"function"==typeof a.chrome.loadTimes&&(n=a.chrome.loadTimes())){s.nt_spdy=n.wasFetchedViaSpdy?1:0;s.nt_cinf=n.connectionInfo;"number"==typeof n.firstPaintTime&&0!==n.firstPaintTime&&(s.nt_first_paint=Math.round(1e3*n.firstPaintTime))}if(e.navigation){t=e.navigation;s.nt_red_cnt=t.redirectCount;s.nt_nav_type=t.type}for(o in s)s.hasOwnProperty(o)&&void 0===s[o]&&delete s[o];BOOMR.addVar(s);if(i&&(i.requestStart&&i.navigationStart&&i.requestStart<i.navigationStart||i.responseStart&&i.navigationStart&&i.responseStart<i.navigationStart||i.responseStart&&i.fetchStart&&i.responseStart<i.fetchStart||i.navigationStart&&i.fetchStart<i.navigationStart||i.responseEnd&&i.responseEnd>BOOMR.now()+864e5)){BOOMR.addVar("nt_bad",1);c.addedVars.push("nt_bad")}try{c.addedVars.push.apply(c.addedVars,Object.keys(s))}catch(e){}0<s.nt_load_end&&(this.fullySent=!0)}c.sendBeacon()},clear:function(){if(c.addedVars&&0<c.addedVars.length){BOOMR.removeVar(c.addedVars);c.addedVars=[]}this.complete=this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!c.initialized){BOOMR.subscribe("page_ready",c.done,null,c);BOOMR.subscribe("prerender_to_visible",c.prerenderToVisible,null,c);BOOMR.subscribe("xhr_load",c.xhr_done,null,c);BOOMR.subscribe("before_unload",c.done,null,c);BOOMR.subscribe("beacon",c.clear,null,c);c.initialized=!0}return this},is_complete:function(){return!0}}}function d(e,t){if("number"==typeof t&&0!==t)return Math.floor((e||0)+t)}}();!function(){var s,n=!1,t=!1,l=!1,u=!1,c=!1,d=!0,f=!1,O=!1,p=!1,i=[],r=!1;if(!BOOMR.plugins.SPA&&BOOMR.plugins.AutoXHR){var o={spaHardMissedOnComplete:function(e){var t,n=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart();r=!1;BOOMR.addVar("spa.missed","1");BOOMR.plugins.RT&&BOOMR.plugins.RT.clearTimer("t_done");e.timing.requestStart=n;0===e.resources.length&&(t=BOOMR.getPerformance())&&t.timing&&t.timing.navigationStart&&t.timing.loadEventEnd&&(e.timing.loadEventEnd=t.timing.loadEventEnd)},onBeacon:function(){BOOMR.removeVar("spa.missed","spa.forced","spa.waiting")}};BOOMR.plugins.SPA={is_complete:function(){return!r},init:function(e){if(e&&e.instrument_xhr){c=e.instrument_xhr;l&&c&&BOOMR.plugins.AutoXHR.enableAutoXhr()}if(!t){t=!0;BOOMR.subscribe("beacon",o.onBeacon,null,o)}},register:function(e){i.push(e)},supported_frameworks:function(){return i},onLoadSpaHardMissed:function(){if(!l){u=!0;c&&BOOMR.plugins.AutoXHR.enableAutoXhr();r=!0;if(p)r=!1;else{BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),BOOMR.window.document.URL]);BOOMR.plugins.SPA.route_change(o.spaHardMissedOnComplete)}}},hook:function(e,t){t=t||{};m("Hooked");if(n)return this;"function"==typeof t.routeFilter&&(f=t.routeFilter);"function"==typeof t.routeChangeWaitFilter&&(O=t.routeChangeWaitFilter);t.disableHardNav&&(p=t.disableHardNav);e&&BOOMR.attach_page_ready(this.onLoadSpaHardMissed);n=!0;return this},route_change:function(t,e){m("Route Change");var n=!1;if(f)try{if(!f.apply(null,e)){m("Route filter returned false; not tracking this route");return}}catch(e){BOOMR.addError(e,"SPA.route_change.routeFilter")}l=!0;var i=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart(),r=u?BOOMR.now():i,o=BOOMR.window.document.URL,a={timing:{requestStart:r},initiator:d&&!p?"spa_hard":"spa",url:o};d=!1;if(!u||"function"==typeof t){u=!0;a.onComplete=function(e){if(!n){n=!0;BOOMR.fireEvent("spa_navigation")}"function"==typeof t&&t(e)}}if(O)try{if(O.apply(null,arguments)){a.wait=!0;s=a}}catch(e){BOOMR.addError(e,"SPA.route_change.routeChangeWaitFilter")}a.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(a);c&&BOOMR.plugins.AutoXHR.enableAutoXhr()},last_location:function(e){lastLocationChange=e},current_spa_nav:function(){return u?"spa":"spa_hard"},wait_complete:function(){if(s){s.wait=!1;s.waitComplete&&s.waitComplete();s=null}},markNavigationComplete:function(){m("Navigation being marked complete");var e=BOOMR.plugins.AutoXHR.getMutationHandler();if(e){BOOMR.addVar("spa.forced","1");BOOMR.addVar("spa.waiting",e.nodesWaitingFor());e.completeEvent()}}}}function m(e){BOOMR.debug(e,"SPA")}}();!function(){var s={auto:!1,enabled:!0,hooked:!1,routeHooked:!1,hadMissedRouteChange:!1,routeChangeInProgress:!1,disableHardNav:!1,resetRouteChangeInProgress:function(){l("resetting routeChangeInProgress");s.routeChangeInProgress&&clearTimeout(s.routeChangeInProgress);s.routeChangeInProgress=!1},setRouteChangeInProgress:function(){s.routeChangeInProgress&&clearTimeout(s.routeChangeInProgress);s.routeChangeInProgress=setTimeout(s.resetRouteChangeInProgress,50)},spaInit:function(e,t){t?BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),t]):e?BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),e]):BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),BOOMR.window.document.URL])},routeChange:function(e,t){if(s.enabled){if(s.disableHardNav&&!BOOMR.onloadFired())return;if(s.routeChangeInProgress)l("routeChangeInProgress, not triggering");else{l("routeChange triggered, sending route_change() event");s.spaInit(e,t);BOOMR.plugins.SPA.route_change()}}else{l("Not enabled - we've missed a routeChange");s.hadMissedRouteChange=!0;s.resetRouteChangeInProgress()}}};if(!BOOMR.plugins.History&&void 0!==BOOMR.plugins.SPA&&void 0!==BOOMR.plugins.AutoXHR&&BOOMR.window&&BOOMR.window.history){BOOMR.plugins.SPA.register("History");BOOMR.plugins.History={is_complete:function(){return!0},hook:function(e,t,n){(n=n||{}).disableHardNav=s.disableHardNav;if(s.hooked)return this;if(function(){var i,r,t,e,n,o=BOOMR.window.history;function a(){BOOMR.window.addEventListener("popstate",function(e){l("popstate");s.routeChange()})}"function"==typeof o.pushState&&(o.pushState=(i=o.pushState,function(e,t,n){l("pushState, title: "+t+" url: "+n);s.routeChange(t,n);return i.apply(this,arguments)}));"function"==typeof o.replaceState&&(o.replaceState=(r=o.replaceState,function(e,t,n){l("replaceState, title: "+t+" url: "+n);s.routeChange(t,n);return r.apply(this,arguments)}));"function"==typeof o.go&&(o.go=(t=o.go,function(e){l("go");s.routeChange();return t.apply(this,arguments)}));"function"==typeof o.back&&(o.back=(e=o.back,function(){l("back");s.routeChange();return e.apply(this,arguments)}));"function"==typeof o.forward&&(o.forward=(n=o.forward,function(){l("forward");s.routeChange();return n.apply(this,arguments)}));BOOMR.window.addEventListener("hashchange",function(e){var t=(e||{}).newURL;l("hashchange "+t);s.routeChange(null,t)});BOOMR.hasBrowserOnloadFired()?a():BOOMR.window.addEventListener("load",function(){setTimeout(a,0)});BOOMR.subscribe("beacon",s.resetRouteChangeInProgress);BOOMR.subscribe("spa_cancel",s.resetRouteChangeInProgress);BOOMR.subscribe("spa_init",s.setRouteChangeInProgress);return!0}()){BOOMR.plugins.SPA.hook(t,n);s.hooked=!0}return this},init:function(e){BOOMR.utils.pluginConfig(s,e,"History",["auto","enabled","disableHardNav"]);s.auto&&s.enabled&&this.hook(void 0,!0,{});return this},disable:function(){s.enabled=!1;return this},enable:function(){s.enabled=!0;if(s.hooked&&s.hadMissedRouteChange){s.hadMissedRouteChange=!1;BOOMR.plugins.SPA.route_change();s.setRouteChangeInProgress();l("Hooked and hadMissedRouteChange sending route_change!")}return this}}}function l(e){BOOMR.debug(e,"History")}}();!function(){if(!BOOMR.plugins.UserTiming){var s={complete:!1,initialized:!1,supported:!1,options:{from:0,window:BOOMR.window},getUserTiming:function(){var e=this.findUserTimingForFrame(s.options.window);s.options.from&&(e=e.filter(function(e){return e.startTime+e.duration>=s.options.from}));var t,n=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(void 0===n){if(0===e.length)return null;for(var i={},r=0,o=e.length;r<o;r++){var a=e[r];i[a.entryType]=i[a.entryType]||{};"mark"===a.entryType?i[a.entryType][a.name]=a.startTime:"measure"===a.entryType&&(i[a.entryType][a.name]=a.duration)}return JSON.stringify(i)}t=n.compressUserTiming(e);return n.compressForUri(t)},addEntriesToBeacon:function(){var e,t=BOOMR.hrNow();if(!this.complete){BOOMR.removeVar("usertiming");(e=this.getUserTiming())&&BOOMR.addVar({usertiming:e});this.options.from=t;this.complete=!0}},findUserTimingForFrame:function(e){var t;if(!e)return[];try{e.location&&e.location.href;if(!("performance"in e&&e.performance&&e.performance.getEntriesByType))return t;t=(t=e.performance.getEntriesByType("mark")).concat(e.performance.getEntriesByType("measure"))}catch(e){return t}return t},clearMetrics:function(e){e.hasOwnProperty("usertiming")&&BOOMR.removeVar("usertiming");this.complete=!1},subscribe:function(){BOOMR.subscribe("before_beacon",this.addEntriesToBeacon,null,this);BOOMR.subscribe("beacon",this.clearMetrics,null,this)},pageReady:function(){this.checkSupport()&&this.subscribe()},checkSupport:function(){if(this.supported)return!0;var e=BOOMR.getPerformance();if(e&&"function"==typeof e.getEntriesByType){var t=e.getEntriesByType("mark"),n=e.getEntriesByType("measure");if(BOOMR.utils.isArray(t)&&BOOMR.utils.isArray(n)){BOOMR.info("Client supports UserTiming API","usertiming");return this.supported=!0}}return!1}};BOOMR.plugins.UserTiming={init:function(e){if(s.initialized)return this;s.checkSupport()?s.subscribe():BOOMR.subscribe("page_ready",s.pageReady,null,s);s.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return s.initialized&&s.supported}}}}();!function(){BOOMR.utils=BOOMR.utils||{};if(!BOOMR.utils||!BOOMR.utils.Compression){var a=BOOMR.utils.Compression={};a.jsUrl=function(e){function t(e){return/[^\w-.]/.test(e)?e=e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0))<256?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4)}):e}var n=[];switch(typeof e){case"number":return isFinite(e)?"~"+e:"~null";case"string":return"~'"+t(e);case"boolean":return"~"+e;case"object":if(!e)return"~null";if(BOOMR.utils.isArray(e)){for(var i=0;i<e.length;i++)i in e&&(n[i]=a.jsUrl(e[i])||"~null");return"~("+(n.join("")||"~")+")"}for(var r in e)if(e.hasOwnProperty(r)){var o=a.jsUrl(e[r]);o&&n.push(t(r)+o)}return"~("+n.sort().join("~")+")";default:return}}}}();BOOMR.t_end=(new Date).getTime();
