!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=99)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.String=0]="String",e[e.Counter=1]="Counter",e[e.Timer=2]="Timer"}(t.Type||(t.Type={}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(9),i=n(14);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(56);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(1)),a=r(n(2)),u=r(n(5)),c=r(n(23)),s=r(n(20)),l=function(){function e(t){(0,o.default)(this,e),this._name=t,this._isMonitor=!1}return(0,a.default)(e,[{key:"withMonitor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isMonitor=e,this}},{key:"validationError",value:function(){return void 0!==this.isMonitor&&"boolean"!=typeof this.isMonitor?new Error("Field isMonitor should be a boolean, but it was a ".concat((0,i.default)(this.isMonitor))):(0,c.default)(this.name,"field name")}},{key:"name",get:function(){return this._name}},{key:"metricKey",get:function(){return this._name}},{key:"isMonitor",set:function(e){this._isMonitor=!!e},get:function(){return this._isMonitor}},{key:"canMonitor",get:function(){throw new Error("Subclass of KatalMetricObject must implement canMonitor")}},{key:"type",get:function(){throw new Error("Subclass of KatalMetricObject must implement type getter")}}]),e}();t.default=l,(0,u.default)(l,"Types",s.default)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){n(3);var r=n(24);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.logError=function(e,t){window.ueLogError?window.ueLogError(e,{logLevel:"ERROR",attribution:"Cathode",message:t}):this.consoleLog&&console.error(e,t)},e.consoleLog=!1,e}();t.ErrorHandler=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"publish",value:function(e,t,n){throw new Error("KatalMetricsDriver is an abstract class, please choose a driver and use that instead")}}]),e}();t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(1)),a=r(n(2)),u=r(n(6)),c=r(n(14)),s=r(n(3)),l=r(n(10)),f=r(n(7)),d=r(n(5)),p=r(n(8)),h=function(e){function t(e,n){var r;return(0,o.default)(this,t),r=(0,u.default)(this,(0,s.default)(t).call(this,e)),(0,d.default)((0,c.default)(r),"truncate",!1),r.value=n,r}return(0,f.default)(t,e),(0,a.default)(t,[{key:"validationError",value:function(){var e=(0,l.default)((0,s.default)(t.prototype),"validationError",this).call(this);if(e)return e;if("string"!=typeof this.value)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be type string, but it was ").concat((0,i.default)(this.value)));if(this.value.length>t.MAX_SIZE){if(!this.truncate)return new Error("Expected field value in String metrics object '".concat(this.name,"' to be ").concat(t.MAX_SIZE," characters or less, but it was ").concat(this.value.length," characters."));this.value=this.value.substring(0,t.MAX_SIZE)}}},{key:"value",get:function(){return this._value},set:function(e){"number"!=typeof e&&"boolean"!=typeof e||(e=e.toString()),this._value=e}},{key:"type",get:function(){return p.default.Types.String}},{key:"canMonitor",get:function(){return!1}}]),t}(p.default);t.default=h,(0,d.default)(h,"MAX_SIZE",256)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(3)),c=r(n(7)),s=r(n(5)),l=r(n(57)),f=r(n(28)),d=r(n(25)),p=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,u.default)(t).call(this,e))).setNamedMetric(t.LATENCY_SUFFIX,function(e){return new f.default(e)}),n.setNamedMetric(t.FAILURE_SUFFIX,function(e){return new d.default(e,1)}),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"setFailure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?1:0,n=this.failureMetric;n.value=t}},{key:"setSuccess",value:function(){this.setFailure(!1)}},{key:"setLatency",value:function(e){this.latencyMetric.value=e}},{key:"latencyMetric",get:function(){return this.getNamedMetric(t.LATENCY_SUFFIX)}},{key:"failureMetric",get:function(){return this.getNamedMetric(t.FAILURE_SUFFIX)}}]),t}(l.default);t.default=p,(0,s.default)(p,"LATENCY_SUFFIX","Latency"),(0,s.default)(p,"FAILURE_SUFFIX","Failure")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);t.safeRun=function(e){try{e()}catch(t){r.ErrorHandler.logError(t)}}},function(e,t,n){"use strict";function r(e,t){return e?"true"===e:t}n.d(t,"a",function(){return r})},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.String="String",e.Counter="Counter",e.Timer="Timer",e.List="List"}(r||(r={}));var i=r;t.default=i},function(e,t,n){"use strict";var r=n(0),i=n(22);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"MetricsDriver",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ErrorHandler",{enumerable:!0,get:function(){return s.ErrorHandler}}),t.Metric=void 0;var o=i(n(55));t.Metric=o;var a=r(n(62)),u=r(n(31)),c=r(n(12)),s=n(34)},function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"!=typeof e)return new Error("Expected ".concat(t," to be a string, but it was a ").concat((0,i.default)(e)));if(e.length>a)return new Error("Expected ".concat(t," to be less than ").concat(a," characters, but it was ").concat(e.length," characters"));if(e.length<1)return new Error("Expected ".concat(t," to be non-blank"));if(!o.test(e))return new Error("Expected ".concat(t," to contain only valid characters, but it was ").concat(e,".  It can only contain letters, numbers, and these symbols: .:@_/-"))};var i=r(n(9)),o=/^[A-Za-z0-9.:@_\/-]+$/,a=127},function(e,t,n){var r=n(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(3)),c=r(n(10)),s=r(n(7)),l=r(n(8)),f=r(n(26)),d=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,u.default)(t).call(this,e))).value=r,n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"add",value:function(e){this.value+=e}},{key:"validationError",value:function(){var e=(0,c.default)((0,u.default)(t.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Counter metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=Math.round(e)}},{key:"type",get:function(){return l.default.Types.Counter}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"!=typeof e)return new Error("Expected ".concat(t," to have type 'number', but it was type '").concat((0,i.default)(e),"'"));if(e<0)return new Error("Expected ".concat(t," to be positive, but it was ").concat(e));if(!o(e))return new Error("Expected ".concat(t," to be an integer, but it was ").concat(e))};var i=r(n(9)),o=function(e){return isFinite(e)&&Math.floor(e)===e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(3)),c=r(n(10)),s=r(n(7)),l=r(n(8)),f=r(n(26)),d=function(e){function t(e,n){var r;return(0,i.default)(this,t),(r=(0,a.default)(this,(0,u.default)(t).call(this,e))).value=n,r}return(0,s.default)(t,e),(0,o.default)(t,[{key:"validationError",value:function(){var e=(0,c.default)((0,u.default)(t.prototype),"validationError",this).call(this);return e||(0,f.default)(this.value,"field value in Timer metrics object '".concat(this.name,"'"))}},{key:"value",get:function(){return this._value},set:function(e){this._value=null!=e?Math.round(e):e}},{key:"type",get:function(){return l.default.Types.Timer}},{key:"canMonitor",get:function(){return!0}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(29)),c=r(n(3)),s=r(n(10)),l=r(n(7)),f=function(e){function t(e,n){var r;return(0,i.default)(this,t),(r=(0,a.default)(this,(0,c.default)(t).call(this,e,void 0))).start(n),r._value=void 0,r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"start",value:function(e){this._startTime=e||this.now()}},{key:"stop",value:function(e){return this._stopTime=e||this.now()}},{key:"now",value:function(){return performance.now()}},{key:"isStopped",get:function(){return void 0!==this._stopTime}},{key:"value",get:function(){return void 0===(0,s.default)((0,c.default)(t.prototype),"value",this)&&(this.isStopped||this.stop(),(0,u.default)((0,c.default)(t.prototype),"value",this.stopTime-this.startTime,this,!0)),(0,s.default)((0,c.default)(t.prototype),"value",this)},set:function(e){(0,u.default)((0,c.default)(t.prototype),"value",e,this,!0)}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}}]),t}(r(n(27)).default);t.default=f},function(e,t,n){n(3);var r=n(24),i=n(5);function o(e,t,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,u=r(e,t);if(u){if((a=Object.getOwnPropertyDescriptor(u,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0})(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0;return e.some(function(e){return null!=(n=t(e))}),n}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(32)),o=r(n(1)),a=r(n(2)),u=r(n(5)),c=r(n(23)),s=r(n(30)),l=n(33),f=["site","serviceName","methodName"],d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),this.context=(0,i.default)({},t)}return(0,a.default)(e,[{key:"merge",value:function(t){if(!t)return this;if(t instanceof e.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");var n=t instanceof e?t.context:t;return new e((0,i.default)({},this.context,n,{relatedMetrics:(0,l.mergeLists)(this.context.relatedMetrics,n.relatedMetrics),relatedMetricsSingleAction:(0,l.mergeLists)(this.context.relatedMetricsSingleAction,n.relatedMetricsSingleAction)}))}},{key:"withoutRelatedMetricsSingleAction",value:function(){return new e((0,i.default)({},this.context,{relatedMetricsSingleAction:void 0}))}},{key:"driverContext",value:function(){return new e((0,i.default)({},this.context,{relatedMetrics:void 0,relatedMetricsSingleAction:void 0}))}},{key:"getFields",value:function(){return(0,i.default)({},this.context)}},{key:"validationError",value:function(){var e=this;return(0,s.default)(f,function(t){if(null==e.context[t])return new Error("Field ".concat(t," is required, but it is ").concat(e.context[t]))})||(0,s.default)(Object.keys(this.context),function(t){return e.validateField(t)})}},{key:"validateField",value:function(e){var t=this.context[e],n="field ".concat(e);switch(e){case"site":case"serviceName":if(t.indexOf("/")>-1)return new Error("Expected ".concat(n," to contain only valid characters, but it was ").concat(t,".  It cannot contain a slash."));case"methodName":case"actionId":return(0,c.default)(t,n)}}}]),e}();t.default=d,(0,u.default)(d,"Builder",function(){function e(){(0,o.default)(this,e),(0,u.default)(this,"context",{})}return(0,a.default)(e,[{key:"withSite",value:function(e){return this.context.site=e,this}},{key:"withServiceName",value:function(e){return this.context.serviceName=e,this}},{key:"withMethodName",value:function(e){return this.context.methodName=e,this}},{key:"withActionId",value:function(e){return this.context.actionId=e,this}},{key:"withRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=t,this}},{key:"addRelatedMetrics",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetrics=(0,l.mergeLists)(this.context.relatedMetrics,t),this}},{key:"withRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=t,this}},{key:"addRelatedMetricsSingleAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.context.relatedMetricsSingleAction=(0,l.mergeLists)(this.context.relatedMetricsSingleAction,t),this}},{key:"build",value:function(){return new d(this.context)}}]),e}())},function(e,t,n){var r=n(5);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLists=function(e,t){return e||t?[].concat((0,i.default)(e||[]),(0,i.default)(t||[])):void 0};var i=r(n(66))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR_HANDLER=void 0;t.DEFAULT_ERROR_HANDLER=function(e){throw e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),i=n(74),o=n(11),a=function(){function e(e,t){o.ErrorHandler.consoleLog=t&&t.debug,this.beaconService=new r.KatalMetricsBeaconService(e,void 0,t),this.orchestrator=new i.InstrumentOrchestrator(this.beaconService)}return e.prototype.publishAction=function(e,t,n,r){},e}();t.SpectrometerInstrument=a;var u=function(){function e(e,t){o.ErrorHandler.consoleLog=t&&t.debug,this.beaconService=new r.KatalMetricsBeaconService(e,void 0,t),this.orchestrator=new i.InstrumentOrchestrator(this.beaconService,void 0,!0,t)}return e.prototype.publishAction=function(e,t,n,r){},e}();t.SpectrometerBoomerangInstrument=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(11),o=n(37),a=function(){function e(e,t,n){this.siteName=e,this.config=n,t&&(this.metricsPublisher=t)}return e.prototype.initializePublisher=function(e,t){return o.KatalMetricsConfig.createPublisher(e,this.getServiceName(t),t)},e.prototype.getServiceName=function(e){return void 0===e&&(e={}),e&&e.applicationName?e.applicationName:window.ue_pty||"Default"},e.prototype.publish=function(e){var t=this;this.metricsPublisher||(this.metricsPublisher=this.initializePublisher(this.siteName,this.config));var n=this.metricsPublisher;e.read().forEach(function(r){try{t.publishKatMetricFromDataPoint(r,n)}catch(o){i.ErrorHandler.logError(o,"Can't send datapoints to KatalMetrics: "+JSON.stringify(e))}})},e.prototype.publishKatMetricFromDataPoint=function(e,t){switch(e.type){case r.Type.Timer:t.publishTimerMonitor(e.name,e.value);break;case r.Type.String:t.publishString(e.name,e.value);break;case r.Type.Counter:t.publishCounterMonitor(e.name,e.value);break;default:i.ErrorHandler.logError(new Error("Can't map "+e.type+" to KatalMetrics Schema"),"datapoint "+JSON.stringify(e))}},e}();t.KatalMetricsBeaconService=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(38)),o=n(21),a=r(n(71)),u=n(11),c=n(73),s={test:"com.amazon.eel.katal.metrics.core.nexus.sellercentral.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus.sellercentral"},l=function(){function e(){}return e.createPublisher=function(t,n,r){var i=e.createDriver(r),a=e.createContext(t,n,r);return new o.Publisher(i,void 0,a).newChildActionPublisherForMethod("SpectrometerMetrics")},e.createDriver=function(t){if(t&&t.debug){var n=new a.default;return window.spx_md=n,console.log("Cathode config:",t),n}return e.createSushiDriverBuilder(t).build()},e.createSushiDriverBuilder=function(e){var t=function(e){var t=e&&e.domain;return-1!==["gamma","prod"].indexOf(t)?"prod":"test"}(e),n=function(e){return e?e.realm:"USAmazon"}(e);return e&&!1===e.mons?(new i.default.Builder).withDomainRealm(t,n).withErrorHandler(function(e){u.ErrorHandler.logError(e)}):(new i.default.Builder).withDomainRealm(t,n).withCustomSourceGroup(s[t]).withErrorHandler(function(e){u.ErrorHandler.logError(e)})},e.createContext=function(e,t,n){var r;return(r=(new o.Context.Builder).withSite("SPX:"+e).withServiceName(t)).withRelatedMetrics.apply(r,[new o.Metric.String("path",c.normalizePath())].concat(n&&n.http_request_id?[new o.Metric.String("http_request_id",n.http_request_id)]:[])).build()},e}();t.KatalMetricsConfig=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(39);var r=n(40).KatalMetricsDriverSushi;t.default=r},function(e,t){},function(e,t,n){"use strict";var r=n(41);Object.defineProperty(t,"__esModule",{value:!0}),t.KatalMetricsDriverSushi=void 0;var i=r(n(42)),o=r(n(43)),a=r(n(44)),u=r(n(45)),c=r(n(47)),s=r(n(19)),l=r(n(48)),f=r(n(18)),d=r(n(12)),p=r(n(20)),h=r(n(50)),m="katal",v={test:"com.amazon.eel.katal.metrics.core.nexus.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus"},y=function(e){function t(e){var n;(0,o.default)(this,t),n=(0,u.default)(this,(0,c.default)(t).call(this)),(0,f.default)((0,s.default)(n),"sushi",void 0),(0,f.default)((0,s.default)(n),"producerId",void 0),(0,f.default)((0,s.default)(n),"sourceGroupId",void 0),(0,f.default)((0,s.default)(n),"errorHandler",void 0),(0,f.default)((0,s.default)(n),"combinedErrorHandler",function(e){if(n.errorHandler)try{return void n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t)}n.defaultErrorHandler(e)});var r=e.domain,i=e.realm,a=e.errorHandler,l=e.sushiClient,d=e.sushiProducer,p=void 0===d?m:d,h=e.sushiClientOptions,y=e.sushiClientTransportOverride,b=e.sourceGroupId||v[r]||v.test;return n.sushi=l||n.buildSushiClient(r,i,b,h,y),n.errorHandler=a,n.producerId=p,n.sourceGroupId=b,n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"beforeUnload",value:function(e){this.sushi.onSushiUnload(e)}},{key:"defaultErrorHandler",value:function(e){console.error("Error publishing metrics:"),console.error(e)}},{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"buildSushiClient",value:function(e,n,r,i,o){if(!e||!n)throw new Error("KatalMetricsDriverSushi requires a domain and realm to build a sushi client.");return new h.default(t.getRealmName(n),r,this.combinedErrorHandler,i,o)}},{key:"publish",value:function(e,t,n){var r=this,o=arguments.length<3?arguments[1]:arguments[2];this.withErrorHandling(function(){if(p.default.List!==e.type){var t=r.mapObjectTypeToNexusSchema(e.type),n=(0,i.default)({},o.context,{metricKey:e.name,value:e.value});e.isMonitor&&(n.isMonitor=!0),r.sushi.reset(),r.sushi.event(n,r.producerId,t,{ssd:1})}else e.metricList.forEach(function(e){r.publish(e,o)})})}},{key:"mapObjectTypeToNexusSchema",value:function(e){switch(e){case p.default.String:return"katal.client.metrics.String.2";case p.default.Counter:return"katal.client.metrics.Counter.3";case p.default.Timer:return"katal.client.metrics.Timer.2";default:throw new Error("Unknown type ".concat(e," when publishing metric object."))}}}],[{key:"getRealmName",value:function(e){switch(e){case"NAAmazon":case"USAmazon":return h.default.REGIONS.NA;case"EUAmazon":return h.default.REGIONS.EU;case"FEAmazon":case"JPAmazon":return h.default.REGIONS.FE;case"CNAmazon":return h.default.REGIONS.CN;default:return e}}}]),t}(d.default);t.KatalMetricsDriverSushi=y,(0,f.default)(y,"Builder",function(){function e(){(0,o.default)(this,e),(0,f.default)(this,"context",{})}return(0,a.default)(e,[{key:"withSushiClient",value:function(e){return this.context.sushiClient=e,this}},{key:"withDomainRealm",value:function(e,t){return this.context.domain=e,this.context.realm=t,this}},{key:"withCustomProducer",value:function(e){return this.context.sushiProducer=e,this}},{key:"withCustomSourceGroup",value:function(e){return this.context.sourceGroupId=e,this}},{key:"withErrorHandler",value:function(e){return this.context.errorHandler=e,this}},{key:"withSushiClientOptions",value:function(e){return this.context.sushiClientOptions=e,this}},{key:"withSushiClientTransportOverride",value:function(e){return this.context.sushiClientTransportOverride=e,this}},{key:"build",value:function(){return new y(this.context)}}]),e}())},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var r=n(18);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(46),i=n(19);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(49);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(51);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(52)),o=r(n(53)),a=r(n(54));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.REGIONS.NA,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;(0,o.default)(this,e);var u=e.createSushiUrl(t,n),c=e.createCsmUserContext(u,i);this.ue_csm=this.setupMockCSMObject(c),this.encapsulatedWindow=this.setupMockWindow(this.ue_csm),this.transportationClientCode(this.ue_csm,window),a&&(this.ue_csm.ue._sBcn={isSupported:!0,send:function(e,t){return a(e,t),!0}}),this.clientCode(this.ue_csm,this.encapsulatedWindow),this.errorHandler=r}return(0,a.default)(e,null,[{key:"createSushiUrl",value:function(t,n){if(!n)throw new Error("Sushi Driver was not provided with a source group.");var r;switch(t){case e.REGIONS.NA:r="unagi-na";break;case e.REGIONS.EU:r="unagi-eu";break;case e.REGIONS.FE:r="unagi-fe";break;case e.REGIONS.CN:r="unagi-cn";break;default:throw new Error("Unrecognized region '".concat(t,"' provided to SushiClient."))}return"https://".concat(r,".amazon.com/1/events/").concat(n)}},{key:"createCsmUserContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c({hiPriFlushInterval:1e3,lowPriFlushInterval:1e4,requestId:"1",errorChannel:"jserr",sessionStorageWrapper:void 0,errorHandlerFunction:console.log,sushiUrl:e},t)}},{key:"REGIONS",get:function(){return{NA:"NA",EU:"EU",FE:"FE",CN:"CN"}}}]),(0,a.default)(e,[{key:"event",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return i&&console.log("SushiClient wrapper publishing the following:",{data:e,producerId:t,schemaId:n,options:r}),this.ue_csm.ue.event(e,t,n,r)}},{key:"reset",value:function(){this.ue_csm.ue.event.reset()}},{key:"onSushiFlush",value:function(e){this.ue_csm.ue.onSushiFlush(e)}},{key:"onSushiUnload",value:function(e){this.ue_csm.ue.onSushiUnload(e)}},{key:"setupMockCSMObject",value:function(e){var t=this;return{ue_hpsi:e.hiPriFlushInterval,ue_lpsi:e.lowPriFlushInterval,ue:{ssw:e.sessionStorageWrapper,log:function(e,n){t.errorHandler?t.errorHandler(e):console.log("An error has occurred in SushiClient channel "+n,e)},exec:function(e,t){return e},event:function(e,t,n){console.warn("SushiClient CSM stub called in unsupported manner: event()")},attach:function(e,t,n){n=n||window,window.EventTarget&&window.EventTarget.prototype&&window.EventTarget.prototype.addEventListener?window.EventTarget.prototype.addEventListener.call(n,e,t,!!window.ue_clf):n.addEventListener?n.addEventListener(e,t,!!window.ue_clf):n.attachEvent&&n.attachEvent("on"+e,t)}},ueLogError:e.errorHandlerFunction,ue_surl:e.sushiUrl,ue_id:e.requestId,ue_err_chan:e.errorChannel}}},{key:"setupMockWindow",value:function(e){return{ue_csm:e,ueLogError:e.ueLogError,ue:e.ue,setTimeout:function(e,t){return window.setTimeout(e,t)}}}},{key:"clientCode",value:function(e,t){e.ue.exec(function(e,t){function n(){for(var e=0;e<arguments.length;e++){var n=arguments[e];try{if(!n.isSupported)throw dummyException;var r=R.buildPayload(_,T);return n.send(b,r)}catch(p){}}h({m:"All supported clients failed",attribution:"CSMSushiClient_TRANSPORTATION_FAIL",f:"sushi-client.js",logLevel:"ERROR"},t.ue_err_chan||"jserr")}function r(){if(T.length){for(var e=0;e<O.length;e++)O[e]();n(p._sBcn||{},p._ajx||{}),T=[],w={},_={},v=y=M=I=0}}function i(e){try{return JSON.stringify(e)}catch(t){}return null}function o(n,o,a,u){var c,d=!1;return u=u||{},++D==s&&h({m:"Max number of Sushi Logs exceeded",f:"sushi-client.js",logLevel:"ERROR",attribution:"CSMSushiClient_MAX_CALLS"},t.ue_err_chan||"jserr"),(c=!(D>=s))&&((c=n&&-1<n.constructor.toString().indexOf("Object")&&o&&-1<o.constructor.toString().indexOf("String")&&a&&-1<a.constructor.toString().indexOf("String"))||0),c&&(p.count&&p.count("Event:"+a,1),n.producerId=n.producerId||o,n.schemaId=n.schemaId||a,n.timestamp=function(){var e=new Date,t=function(e){return 10>e?"0"+e:e};return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}(),o=Date.now?Date.now():+new Date,a=Math.random().toString().substring(2,12),n.messageId=e.ue_id+"-"+o+"-"+a,u&&!u.ssd&&(n.sessionId=n.sessionId||e.ue_sid,n.requestId=n.requestId||e.ue_id,n.obfuscatedMarketplaceId=n.obfuscatedMarketplaceId||e.ue_mid),(o=i(n))?(o=o.length,(T.length==l||M+o>f)&&r(),M+=o,n={data:R.compressEvent(n)},T.push(n),(u||{}).n?0===P?r():v||(v=t.setTimeout(r,P)):y||(y=t.setTimeout(r,k)),d=!0):d=!1),!d&&e.ue_int&&console.error("Invalid JS Nexus API call"),d}function a(){if(!E){for(var t=0;t<C.length;t++)C[t]();for(t=0;t<O.length;t++)O[t]();T.length&&(e.ue_sbuimp&&e.ue&&e.ue.ssw&&(t=i({dct:_,evt:T}),e.ue.ssw("eeldata",t),e.ue.ssw("eelsts","unk")),n(p._sBcn||{})),E=!0}}function u(e){C.push(e)}function c(e){O.push(e)}var s=1e3,l=499,f=524288,d=function(){},p=e.ue||{},h=p.log||d,m=e.uex||d;(e.uet||d)("bb","ue_sushi_v1",{wb:1});var v,y,b=e.ue_surl||"https://unagi-na.amazon.com/1/events/com.amazon.csm.nexusclient.gamma",g=["messageId","timestamp"],S="#",T=[],w={},_={},M=0,I=0,D=0,C=[],O=[],E=!1,P=void 0===e.ue_hpsi?1e3:e.ue_hpsi,k=void 0===e.ue_lpsi?1e4:e.ue_lpsi,R=function(){function e(e){return w[e]=S+I++,_[w[e]]=e,w[e]}return{compressEvent:function t(n){if(!(n instanceof Function)){if(n instanceof Array){for(var r=[],i=n.length,o=0;o<i;o++)r[o]=t(n[o]);return r}if(n instanceof Object){for(i in r={},n)n.hasOwnProperty(i)&&(r[w[i]?w[i]:e(i)]=-1===g.indexOf(i)?t(n[i]):n[i]);return r}return"string"==typeof n&&(n.length>(S+I).length||n.charAt(0)===S)?w[n]?w[n]:e(n):n}},buildPayload:function(){return i({cs:{dct:_},events:T})}}}();!function(){if(p.event&&p.event.isStub){if(e.ue_sbuimp&&e.ue&&e.ue.ssw){var t=e.ue.ssw("eelsts").val;if(t&&"unk"===t&&(t=e.ue.ssw("eeldata").val)){var n;e:{try{n=JSON.parse(t);break e}catch(w){}n=null}n&&n.evt instanceof Array&&n.dct instanceof Object&&(T=n.evt,_=n.dct,T&&_&&(r(),e.ue.ssw("eeldata","{}"),e.ue.ssw("eelsts","scs")))}}p.event.replay(function(e){e[3]=e[3]||{},e[3].n=1,o.apply(this,e)}),p.onSushiUnload.replay(function(e){u(e[0])}),p.onSushiFlush.replay(function(e){c(e[0])})}}(),p.attach("beforeunload",a),p.attach("pagehide",a),p._cmps=R,p.event=o,p.event.reset=function(){D=0},p.onSushiUnload=u,p.onSushiFlush=c;try{t.P&&t.P.register&&t.P.register("sushi-client",d)}catch(x){e.ueLogError(x,{logLevel:"WARN"})}m("ld","ue_sushi_v1",{wb:1})},"Nxs-JS-Client")(e,t)}},{key:"transportationClientCode",value:function(e,t){e.ue.exec(function(e,t){var n=function(){},r={send:function(e,r){if(r&&e){var i;if(t.XDomainRequest)(i=new XDomainRequest).onerror=n,i.ontimeout=n,i.onprogress=n,i.onload=n,i.timeout=0;else if(t.XMLHttpRequest){if(!("withCredentials"in(i=new XMLHttpRequest)))throw""}else i=void 0;if(!i)throw"";i.open("POST",e,!0),i.setRequestHeader&&i.setRequestHeader("Content-type","text/plain"),i.send(r)}},isSupported:!0},i={send:function(t,n){if(t&&n){if(!navigator.sendBeacon(t,n))throw"";e.ue_sbuimp&&e.ue&&e.ue.ssw&&e.ue.ssw("eelsts","scs")}},isSupported:!(!navigator.sendBeacon||t.cordova&&t.cordova.platformId&&"ios"==t.cordova.platformId)};e.ue._ajx=r,e.ue._sBcn=i},"Transportation-clients")(e,t)}}]),e}();t.default=s},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Object",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"String",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Counter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"TimerStopwatch",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"TimedAttempt",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Initialization",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"HttpRequest",{enumerable:!0,get:function(){return f.default}});var i=r(n(8)),o=r(n(13)),a=r(n(25)),u=r(n(27)),c=r(n(28)),s=r(n(15)),l=r(n(60)),f=r(n(61))},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(3)),c=r(n(7)),s=r(n(58)),l=r(n(59)),f=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,u.default)(t).call(this,e))).namedMetrics={},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"setNamedMetric",value:function(e,t){var n=t(this.getNameForSubMetric(e));n.canMonitor&&(n.isMonitor=this.isMonitor),this.namedMetrics[e]=n}},{key:"setOrDeleteNamedMetricValue",value:function(e,t,n){null==n?this.deleteNamedMetric(e):this.getOrCreateNamedMetric(e,function(e){return new t(e,n)}).value=n}},{key:"getOrCreateNamedMetric",value:function(e,t){return this.namedMetrics[e]||this.setNamedMetric(e,t),this.namedMetrics[e]}},{key:"getNamedMetric",value:function(e){return this.namedMetrics[e]}},{key:"deleteNamedMetric",value:function(e){delete this.namedMetrics[e]}},{key:"getNamedMetricValue",value:function(e){var t=this.getNamedMetric(e);if(t)return t.value}},{key:"getNameForSubMetric",value:function(e){return"".concat(this.name,".").concat(e)}},{key:"metricList",get:function(){return(0,l.default)(this.namedMetrics)}}]),t}(s.default);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(10)),c=r(n(3)),s=r(n(29)),l=r(n(7)),f=r(n(8)),d=r(n(30)),p=function(e){function t(e){return(0,i.default)(this,t),(0,a.default)(this,(0,c.default)(t).call(this,e))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"validationError",value:function(){return(0,d.default)(this.metricList,function(e){return e.validationError()})}},{key:"metricList",get:function(){throw new Error("Subclass of KatalMetricObjectList must implement metricList getter")}},{key:"isMonitor",set:function(e){(0,s.default)((0,c.default)(t.prototype),"isMonitor",e,this,!0),this.metricList.forEach(function(t){t.canMonitor&&(t.isMonitor=e)})},get:function(){return(0,u.default)((0,c.default)(t.prototype),"isMonitor",this)}},{key:"canMonitor",get:function(){return!0}},{key:"type",get:function(){return f.default.Types.List}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.values?Object.values:function(e){return Object.keys(e).map(function(t){return e[t]})};t.default=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(6)),a=r(n(3)),u=r(n(7)),c=r(n(5)),s=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,a.default)(t).call(this,t.INITIALIZE_METRIC_NAME))}return(0,u.default)(t,e),t}(r(n(15)).default);t.default=s,(0,c.default)(s,"INITIALIZE_METRIC_NAME","Initialization")},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(6)),u=r(n(3)),c=r(n(7)),s=r(n(5)),l=r(n(15)),f=r(n(13)),d=function(e){function t(e){return(0,i.default)(this,t),(0,a.default)(this,(0,u.default)(t).call(this,"".concat(t.HTTP_REQUEST_PREFIX,".").concat(e)))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"url",set:function(e){this.setOrDeleteNamedMetricValue(t.URL_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.URL_SUFFIX)}},{key:"urlMetric",get:function(){return this.getNamedMetric(t.URL_SUFFIX)}},{key:"statusCode",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_CODE_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_CODE_SUFFIX)}},{key:"statusCodeMetric",get:function(){return this.getNamedMetric(t.STATUS_CODE_SUFFIX)}},{key:"statusText",set:function(e){this.setOrDeleteNamedMetricValue(t.STATUS_TEXT_SUFFIX,f.default,e)},get:function(){return this.getNamedMetricValue(t.STATUS_TEXT_SUFFIX)}},{key:"statusTextMetric",get:function(){return this.getNamedMetric(t.STATUS_TEXT_SUFFIX)}}]),t}(l.default);t.default=d,(0,s.default)(d,"HTTP_REQUEST_PREFIX","HTTPRequest"),(0,s.default)(d,"URL_SUFFIX","URL"),(0,s.default)(d,"STATUS_CODE_SUFFIX","StatusCode"),(0,s.default)(d,"STATUS_TEXT_SUFFIX","StatusText")},function(e,t,n){"use strict";var r=n(22),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(5)),c=i(n(63)),s=i(n(31)),l=i(n(8)),f=r(n(21)),d=i(n(13)),p=n(33),h=n(70),m=function(e){console.error("Error publishing metrics:"),console.error(e)},v=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.default;if((0,o.default)(this,e),(0,u.default)(this,"combinedErrorHandler",function(e){try{n.errorHandler(e)}catch(t){console.error("Error handling error publishing metrics:"),console.error(t),m(e)}}),i instanceof s.default.Builder)throw new Error("KatalMetricsContext.Builder object passed instead of KatalMetricsContext.  Try calling .build() method.");this.driver=t,this.errorHandler=r,this.context=i instanceof s.default?i:new s.default(i)}return(0,a.default)(e,[{key:"withErrorHandling",value:function(e){try{return e()}catch(t){this.combinedErrorHandler(t)}}},{key:"publish",value:function(e){var t=this;this.withErrorHandling(function(){if(!e)throw new Error("Cannot publish undefined/null metric object");if(l.default.Types.List===e.type)e.metricList.forEach(function(e){t.publish(e)});else{var n=t.context.driverContext(),r=n.validationError();if(r)throw r;var i=e.validationError();if(i)throw i;(0,h.publishToExtension)(e,n),t.driver.publish(e,t.combinedErrorHandler,n)}})}},{key:"newChildPublisher",value:function(t){return new e(this.driver,this.errorHandler,this.context.merge(t))}},{key:"newChildActionPublisher",value:function(t){var n=this._generateActionid(t),r=this.context.withoutRelatedMetricsSingleAction().merge({actionId:n}).merge(t),i=new e(this.driver,this.errorHandler,r),o=(0,p.mergeLists)(this.context.context.relatedMetrics,this.context.context.relatedMetricsSingleAction);return o&&o.forEach(function(e){i.publish(e)}),i}},{key:"newChildActionPublisherChained",value:function(e){var t=this._generateActionid(e),n=[new d.default("parentActionId",t)],r=new s.default({actionId:t,relatedMetricsSingleAction:n}).merge(e);return this.newChildActionPublisher(r)}},{key:"newChildActionPublisherChainedForMethod",value:function(e,t){return this.newChildActionPublisherChained(new s.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForMethod",value:function(e,t){return this.newChildActionPublisher(new s.default({methodName:e}).merge(t))}},{key:"newChildActionPublisherForInitialization",value:function(e){return this.newChildActionPublisherForMethod("Initialization",e)}},{key:"publishString",value:function(e,t){this.publish(new f.Metric.String(e,t))}},{key:"publishStringTruncate",value:function(e,t){var n=new f.Metric.String(e,t);n.truncate=!0,this.publish(n)}},{key:"publishCounter",value:function(e,t){this.publish(new f.Metric.Counter(e,t))}},{key:"publishTimer",value:function(e,t){this.publish(new f.Metric.Timer(e,t))}},{key:"publishCounterMonitor",value:function(e,t){this.publish(new f.Metric.Counter(e,t).withMonitor())}},{key:"publishTimerMonitor",value:function(e,t){this.publish(new f.Metric.Timer(e,t).withMonitor())}},{key:"_generateActionid",value:function(e){if(e){var t=function(e){return e.context?e.context:e}(e);if(t.actionId)return t.actionId}return(0,c.default)()}}]),e}();t.default=v},function(e,t,n){var r=n(64),i=n(65);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var u=0;u<16;++u)t[o+u]=a[u];return t||i(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){var r=n(67),i=n(68),o=n(69);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishToExtension=function(e,t){"undefined"!=typeof window&&window.__KATAL_METRICS_EXTENSION__&&window.__KATAL_METRICS_EXTENSION__.publish(e,t.getFields())}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(72)),o=r(n(32)),a=r(n(1)),u=r(n(2)),c=r(n(6)),s=r(n(3)),l=r(n(14)),f=r(n(7)),d=r(n(5)),p=r(n(12)),h=r(n(8)),m=n(34),v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_ERROR_HANDLER;return(0,a.default)(this,t),e=(0,c.default)(this,(0,s.default)(t).call(this)),(0,d.default)((0,l.default)(e),"metrics",[]),(0,d.default)((0,l.default)(e),"beforeUnloadHandlers",[]),e.errorHandler=n,e}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getMetricArray",value:function(){return this.metrics}},{key:"clearMetricArray",value:function(){this.metrics=[]}},{key:"getAndClearMetricArray",value:function(){var e=this.getMetricArray();return this.clearMetricArray(),e}},{key:"beforeUnload",value:function(e){this.beforeUnloadHandlers.push(e)}},{key:"runPendingBeforeUnloadHandlers",value:function(){this.beforeUnloadHandlers.forEach(function(e){e()});var e=this.beforeUnloadHandlers.length;return this.beforeUnloadHandlers=[],e}},{key:"publish",value:function(e,t,n){var r=(0,o.default)({},n.getFields());switch(e.type){case h.default.Types.String:case h.default.Types.Counter:case h.default.Types.Timer:(0,i.default)(r,{type:e.type,metricKey:e.name,value:e.value}),e.isMonitor&&(r.isMonitor=!0);break;default:var a=new Error("Unknown type ".concat(e.type," when publishing metric object."));return void this.errorHandler(a)}this.metrics.push(r)}}]),t}(p.default);t.default=v},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=function(){return window.location.pathname.replace(/\/ref=.*/,"").replace(/\/\b\d{3}-\d{7}-\d{7}\b/g,"").replace(/;jsessionid=.*$/g,"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),i=n(77),o=n(80),a=n(87),u=n(90),c=n(92),s=function(){function e(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r={}),this.beaconService=e,this.config=r,this.instruments=[],this.readyFired=!1,this.instruments=t||this.buildInstruments(n),this.addListeners()}return e.prototype.addListeners=function(){var e=this;document.addEventListener("readystatechange",function(t){e.checkAndInformInstrumentsIfDomComplete()}),window.onbeforeunload=function(){e.informAllOfUnload()},this.checkAndInformInstrumentsIfDomComplete()},e.prototype.buildInstruments=function(e){return e?[new o.BoomerangInstrument(this.beaconService,this.config),new u.ClientDimensionInstrument(this.beaconService,this.config),new c.UserInstrument(this.beaconService,this.config),new r.FrontEndFatals(this.beaconService),new i.CTCFInstrument(this.beaconService),new a.BrowserPerformanceInstrument(this.beaconService)]:[new r.FrontEndFatals(this.beaconService),new u.ClientDimensionInstrument(this.beaconService,this.config),new c.UserInstrument(this.beaconService,this.config),new i.CTCFInstrument(this.beaconService),new a.BrowserPerformanceInstrument(this.beaconService)]},e.prototype.informAllOfUnload=function(){var e=this;this.instruments.forEach(function(t){t.documentWillUnload().forEach(function(t){return e.beaconService.publish(t)})})},e.prototype.checkAndInformInstrumentsIfDomComplete=function(){"complete"!==document.readyState||this.readyFired||(this.readyFired=!0,this.instruments.forEach(function(e){e.documentReady()}))},e}();t.InstrumentOrchestrator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=function(){function e(e){var t=this;this.beaconService=e,this.errorCount=0,window.addEventListener("error",function(){t.errorCount++})}return e.prototype.documentReady=function(){var e=this;this.timeout=setInterval(function(){var t=e.getErrorVectorIfCounted();t&&e.beaconService.publish(t)},2e3)},e.prototype.getErrorVectorIfCounted=function(){var e=null;return this.errorCount>0&&(e=new r.JsErrorDataVector(this.errorCount),this.errorCount=0),e},e.prototype.documentWillUnload=function(){clearTimeout(this.timeout);var e=this.getErrorVectorIfCounted();return e?[e]:[]},e}();t.FrontEndFatals=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e){this.errorsCount=e}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"jsErrorCount",value:this.errorsCount}]},e}();t.JsErrorDataVector=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(78),i=n(79),o=n(16),a=function(){function e(e){this.metricsBeacon=e,this.csm=new r.CSMDataAccessor,this.foundCtcf=!1}return Object.defineProperty(e.prototype,"csmDataAccessor",{set:function(e){this.csm=e},enumerable:!0,configurable:!0}),e.prototype.documentReady=function(){var e=this,t=0,n=function(){t<=5&&window.setTimeout(function(){o.safeRun(function(){var r=e.fetchCtcf();r?(e.foundCtcf=!0,e.metricsBeacon.publish(r)):(t++,n())})},9e3)};n()},e.prototype.fetchCtcf=function(){if(this.csm.isCSMAvailable()){var e=this.csm.getData().cf;if(e)return new i.CTCFDataVector(e)}return null},e.prototype.documentWillUnload=function(){if(!this.csm.isCSMAvailable())return[new i.CSMMissingDataVector(1),new i.CSMMissingTimeDataVector(performance.now())];if(!this.foundCtcf){var e=this.fetchCtcf();if(!e)return[new i.CTCFMissingDataVector(1),new i.CTCFMissingTimeDataVector(performance.now())];this.metricsBeacon.publish(e)}return[]},e}();t.CTCFInstrument=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.isCSMAvailable=function(){return window.ue&&window.ue.iel},e.prototype.getData=function(){if(this.isCSMAvailable()){var e=this.getPairs();return this.pairsToMap(e)}return null},e.prototype.pairsToMap=function(e){var t={};return e.forEach(function(e){t[e.key]=e.value}),t},e.prototype.getPairs=function(){var e=this,t=this.getPostbackUrls().map(function(t){var n=-1!=t.indexOf("//fls"),r=e.decodePostback(t,n);return e.getPostbackPairs(r)});return[].concat.apply([],t)},e.prototype.getPostbackPairs=function(e){return(e=e.substr(e.indexOf("?"))).split("&").map(function(e){var t=e.split("=");return{key:t[0],value:t[1]||""}})},e.prototype.decodePostback=function(e,t){if(!t)return e;var n=e.split("$uedata=")[1].substr(2);return decodeURIComponent(n)},e.prototype.getPostbackUrls=function(){return ue.iel.map(function(e){return e.src}).concat(ue.ielf)},e}();t.CSMDataAccessor=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e){this.clicktoCf=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToCF",value:this.clicktoCf}]},e}();t.CTCFDataVector=i;var o=function(){function e(e){this.unloadBeforeClickToCF=e}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"unloadBeforeClickToCF",value:this.unloadBeforeClickToCF}]},e}();t.CTCFMissingDataVector=o;var a=function(){function e(e){this.unloadTimeBeforeClickToCF=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"unloadTimeBeforeClickToCF",value:this.unloadTimeBeforeClickToCF}]},e}();t.CTCFMissingTimeDataVector=a;var u=function(){function e(e){this.unloadBeforeCSM=e}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"unloadBeforeCSM",value:this.unloadBeforeCSM}]},e}();t.CSMMissingDataVector=u;var c=function(){function e(e){this.unloadTimeBeforeCSM=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"unloadTimeBeforeCSM",value:this.unloadTimeBeforeCSM}]},e}();t.CSMMissingTimeDataVector=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),i=n(82),o=n(83),a=n(84),u=n(85),c=n(16),s=n(86),l=function(){function e(e,t){this.beaconService=e,this.config=t,this.ctciSent=!1,this.ctvrSent=!1,this.unloadDurationSent=!1,this.redirectDurationSent=!1,this.domainLookupDurationSent=!1,this.tcpDurationSent=!1,this.requestDurationSent=!1,this.responseDurationSent=!1,this.domProcessingDurationSent=!1,this.onloadDurationSent=!1,this.isHidden=!1,this.everHidden=!1,this.longTaskSent=!1,this.fpsSent=!1,this.domSizeSent=!1,this.pageBusySent=!1,this.ttfiSent=!1,this.firstInputDelaySent=!1,this.delayedInteractionsSent=!1,this.epochSent=!1}return e.prototype.boomerangInit=function(){var e=this;c.safeRun(function(){var t=window.BOOMR;t?c.safeRun(function(){e.processBoomerangData(t)}):document.addEventListener("onBoomerangLoaded",function(t){c.safeRun(function(){e.processBoomerangData(t.detail.BOOMR)})}),e.updateEverHidden()})},e.prototype.updateEverHidden=function(){this.everHidden=this.everHidden||(this.BOOMR?"hidden"===this.BOOMR.visibilityState()||"unloaded"===this.BOOMR.visibilityState():document.hidden)},e.prototype.documentReady=function(){var e=this;c.safeRun(function(){e.isHidden=document.hidden,e.updateEverHidden();var t=document;"complete"===document.readyState&&(e.useObserver()||e.boomerangInit(),e.handleBoomerInitTimeAfterDomComplete(performance.now()));var n=!1,r=new MutationObserver(function(){setTimeout(function(){n||(e.handleBoomerInitTimeAfterMutationObserver(performance.now()),n=!0,e.useObserver()&&e.boomerangInit())},1e3)});t&&r.observe(t,{childList:!0,subtree:!0})})},e.prototype.useObserver=function(){return s.legacyObserverSites.includes(this.config.sitename)},e.prototype.processBoomerangData=function(e){var t=this;c.safeRun(function(){e.init(u.BoomerangConfig),t.BOOMR=e,e.subscribe("visibility_changed",function(){t.updateEverHidden()}),e.subscribe("before_beacon",function(e){t.captureEpochTime(e),t.captureCtCi(e),t.captureCtVr(e),t.captureLongTask(e),t.captureFrameRate(e),t.captureDomSize(e),t.capturePageBusy(e),t.captureTtfi(e),t.captureFirstInputDelay(e),t.captureDelayedInteractions(e),t.config.browserPerformance&&(t.captureBrowserPerformanceMetricDuration(e,t.unloadDurationSent,"nt_unload_st","nt_unload_end"),t.captureBrowserPerformanceMetricDuration(e,t.redirectDurationSent,"nt_red_st","nt_red_end"),t.captureBrowserPerformanceMetricDuration(e,t.domainLookupDurationSent,"nt_dns_st","nt_dns_end"),t.captureBrowserPerformanceMetricDuration(e,t.tcpDurationSent,"nt_con_st","nt_con_end"),t.captureBrowserPerformanceMetricDuration(e,t.requestDurationSent,"nt_req_st","nt_res_st"),t.captureBrowserPerformanceMetricDuration(e,t.responseDurationSent,"nt_res_st","nt_res_end"),t.captureBrowserPerformanceMetricDuration(e,t.domProcessingDurationSent,"nt_domloading","nt_domcomp"),t.captureBrowserPerformanceMetricDuration(e,t.onloadDurationSent,"nt_load_st","nt_load_end"))})})},e.prototype.captureCtCi=function(e){this.ctciSent||e["c.tti"]&&(this.handleBoomerangTiming(e["c.tti"],e["c.tti.m"]),this.ctciSent=!0)},e.prototype.captureEpochTime=function(e){this.epochSent||e["c.e"]&&(this.handleEpochTime(e["c.e"]),this.epochSent=!0)},e.prototype.captureCtVr=function(e){this.ctvrSent||e["c.tti.vr"]&&(this.handleTimeToVR(e["c.tti.vr"]),this.ctvrSent=!0)},e.prototype.captureTtfi=function(e){this.ttfiSent||e["c.ttfi"]&&(this.handleTtfi(e["c.ttfi"]),this.ttfiSent=!0)},e.prototype.captureFirstInputDelay=function(e){this.firstInputDelaySent||e["c.fid"]&&(this.handleFirstInputDelay(e["c.fid"]),this.firstInputDelaySent=!0)},e.prototype.captureDelayedInteractions=function(e){this.delayedInteractionsSent||e["c.t.interdly"]&&(this.handleDelayedInteractions(e["c.t.interdly"]),this.delayedInteractionsSent=!0)},e.prototype.captureLongTask=function(e){this.longTaskSent||e["c.lt"]&&(this.handleLongTask(e["c.lt"],e["c.t.longtask"]),this.longTaskSent=!0)},e.prototype.captureFrameRate=function(e){this.fpsSent||e["c.f"]&&(this.handleFrameRate(e["c.f"],e["c.t.fps"],e["c.f.s"]),this.fpsSent=!0)},e.prototype.captureDomSize=function(e){this.domSizeSent||e["c.t.domsz"]&&(this.handleDomSize(e["c.t.domsz"]),this.domSizeSent=!0)},e.prototype.capturePageBusy=function(e){this.pageBusySent||e["c.b"]&&(this.handlePageBusy(e["c.b"],e["c.t.busy"]),this.pageBusySent=!0)},e.prototype.captureBrowserPerformanceMetricDuration=function(e,t,n,r){if(!t&&e[n]&&e[r]){var i=e[r]-e[n];this.handleBrowserPerformanceMetricDuration(n,i)}},e.prototype.handleBrowserPerformanceMetricDuration=function(e,t){var n=this;c.safeRun(function(){try{var r=n.getBrowserPerformanceDataVector(e,t);n.beaconService.publish(r)}catch(i){console.log(i)}})},e.prototype.getBrowserPerformanceDataVector=function(e,t){switch(e){case"nt_unload_st":return this.unloadDurationSent=!0,new o.UnloadDurationDataVector(t);case"nt_red_st":return this.redirectDurationSent=!0,new o.RedirectDurationDataVector(t);case"nt_dns_st":return this.domainLookupDurationSent=!0,new o.DomainLookupDurationDataVector(t);case"nt_con_st":return this.tcpDurationSent=!0,new o.TcpDurationDataVector(t);case"nt_req_st":return this.requestDurationSent=!0,new o.RequestDurationDataVector(t);case"nt_res_st":return this.responseDurationSent=!0,new o.ResponseDurationDataVector(t);case"nt_domloading":return this.domProcessingDurationSent=!0,new o.DomProcessingDurationDataVector(t);case"nt_load_st":return this.onloadDurationSent=!0,new o.OnloadDurationDataVector(t);default:throw"There was an error finding the correct Data Vector for "+e}},e.prototype.handleBoomerangTiming=function(e,t){var n=this;c.safeRun(function(){n.beaconService.publish(n.isHidden?new r.TimeToInteractiveBackgroundLoadDataVector(e,t):new r.TimeToInteractiveDataVector(e,t)),n.beaconService.publish(n.everHidden||n.isHidden?new r.TimeToInteractiveBackgroundLoadDataVectorExperiment(e,t):new r.TimeToInteractiveDataVectorExperiment(e,t))})},e.prototype.handleEpochTime=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new i.EpochTimeDataVector(e))})},e.prototype.handleTimeToVR=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.TimeToVisuallyReadyDataVector(e))})},e.prototype.handleTtfi=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.TimeToFirstInteractionDataVector(e))})},e.prototype.handleFirstInputDelay=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.FirstInputDelayDataVector(e))})},e.prototype.handleDelayedInteractions=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.DelayedInteractionsDataVector(e))})},e.prototype.handleLongTask=function(e,t){var n=this;c.safeRun(function(){n.beaconService.publish(new i.LongTaskDataVector(e,t))})},e.prototype.handleFrameRate=function(e,t,n){var r=this;c.safeRun(function(){r.beaconService.publish(new i.FrameRateDataVector(e,t,n))})},e.prototype.handleDomSize=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new i.DomSizeDataVector(e))})},e.prototype.handlePageBusy=function(e,t){var n=this;c.safeRun(function(){n.beaconService.publish(new i.PageBusyDataVector(e,t))})},e.prototype.handleBoomerInitTimeAfterDomComplete=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.BoomerInitTimeAfterDomCompleteDataVector(e))})},e.prototype.handleBoomerInitTimeAfterMutationObserver=function(e){var t=this;c.safeRun(function(){t.beaconService.publish(new r.BoomerInitTimeAfterMutationObserverDataVector(e))})},e.prototype.documentWillUnload=function(){return this.ctciSent?[]:[new a.MissedTimeToInteractiveDataVector(1),new a.MissedTimeToInteractiveTimeDataVector(performance.now())]},e}();t.BoomerangInstrument=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t){this.timeToInteractive=e,this.timeToInteractiveMethod=t}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToCI",value:this.timeToInteractive},{type:r.Type.String,name:"clickToCIMethod",value:this.timeToInteractiveMethod}]},e}();t.TimeToInteractiveDataVector=i;var o=function(){function e(e){this.timeToVisuallyReady=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToVR",value:this.timeToVisuallyReady}]},e}();t.TimeToVisuallyReadyDataVector=o;var a=function(){function e(e,t){this.timeToInteractive=e,this.timeToInteractiveMethod=t}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToCIBackground",value:this.timeToInteractive},{type:r.Type.String,name:"clickToCIMethodBackground",value:this.timeToInteractiveMethod}]},e}();t.TimeToInteractiveBackgroundLoadDataVector=a;var u=function(){function e(e,t){this.timeToInteractive=e,this.timeToInteractiveMethod=t}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToCIExperiment",value:this.timeToInteractive},{type:r.Type.String,name:"clickToCIMethodExperiment",value:this.timeToInteractiveMethod}]},e}();t.TimeToInteractiveDataVectorExperiment=u;var c=function(){function e(e,t){this.timeToInteractive=e,this.timeToInteractiveMethod=t}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"clickToCIBackgroundExperiment",value:this.timeToInteractive},{type:r.Type.String,name:"clickToCIMethodBackgroundExperiment",value:this.timeToInteractiveMethod}]},e}();t.TimeToInteractiveBackgroundLoadDataVectorExperiment=c;var s=function(){function e(e){this.boomerInitTimeAfterDomComplete=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"boomerInitTimeAfterDomComplete",value:this.boomerInitTimeAfterDomComplete}]},e}();t.BoomerInitTimeAfterDomCompleteDataVector=s;var l=function(){function e(e){this.boomerInitTimeAfterMutationObserver=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"boomerInitTimeAfterMutationObserver",value:this.boomerInitTimeAfterMutationObserver}]},e}();t.BoomerInitTimeAfterMutationObserverDataVector=l;var f=function(){function e(e){this.timeToFirstInteraction=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"timeToFirstInteraction",value:this.timeToFirstInteraction}]},e}();t.TimeToFirstInteractionDataVector=f;var d=function(){function e(e){this.firstInputDelay=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"firstInputDelay",value:this.firstInputDelay}]},e}();t.FirstInputDelayDataVector=d;var p=function(){function e(e){this.delayedInteractions=e}return e.prototype.read=function(){return[{type:r.Type.String,name:"delayedInteractionsTimeline",value:this.delayedInteractions}]},e}();t.DelayedInteractionsDataVector=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t){this.longTaskData=e,this.timelineData=t}return e.prototype.read=function(){return[{type:r.Type.String,name:"longTask",value:this.longTaskData},{type:r.Type.String,name:"longTaskTimeline",value:this.timelineData}]},e}();t.LongTaskDataVector=i;var o=function(){function e(e,t,n){this.frameRateData=e,this.timelineData=t,this.startTime=n}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"frameRate",value:this.frameRateData},{type:r.Type.String,name:"frameRateTimeline",value:this.timelineData},{type:r.Type.String,name:"frameRateStartTime",value:this.startTime}]},e}();t.FrameRateDataVector=o;var a=function(){function e(e){this.timelineData=e}return e.prototype.read=function(){return[{type:r.Type.String,name:"domSizeTimeline",value:this.timelineData}]},e}();t.DomSizeDataVector=a;var u=function(){function e(e,t){this.pageBusyData=e,this.timelineData=t}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"pageBusy",value:this.pageBusyData},{type:r.Type.String,name:"pageBusyTimeline",value:this.timelineData}]},e}();t.PageBusyDataVector=u;var c=function(){function e(e){this.epochTime=e}return e.prototype.read=function(){return[{type:r.Type.String,name:"epochTime",value:this.epochTime}]},e}();t.EpochTimeDataVector=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e){this.unloadDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"unloadDuration",value:this.unloadDuration}]},e}();t.UnloadDurationDataVector=i;var o=function(){function e(e){this.redirectDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"redirectDuration",value:this.redirectDuration}]},e}();t.RedirectDurationDataVector=o;var a=function(){function e(e){this.domainLookupDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"domainLookupDuration",value:this.domainLookupDuration}]},e}();t.DomainLookupDurationDataVector=a;var u=function(){function e(e){this.tcpDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"tcpDuration",value:this.tcpDuration}]},e}();t.TcpDurationDataVector=u;var c=function(){function e(e){this.requestDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"requestDuration",value:this.requestDuration}]},e}();t.RequestDurationDataVector=c;var s=function(){function e(e){this.responseDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"responseDuration",value:this.responseDuration}]},e}();t.ResponseDurationDataVector=s;var l=function(){function e(e){this.domProcessingDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"domProcessingDuration",value:this.domProcessingDuration}]},e}();t.DomProcessingDurationDataVector=l;var f=function(){function e(e){this.onloadDuration=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"onloadDuration",value:this.onloadDuration}]},e}();t.OnloadDurationDataVector=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e){this.unloadBeforeClickToCI=e}return e.prototype.read=function(){return[{type:r.Type.Counter,name:"unloadBeforeClickToCI",value:this.unloadBeforeClickToCI}]},e}();t.MissedTimeToInteractiveDataVector=i;var o=function(){function e(e){this.unloadTimeBeforeClickToCI=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"unloadTimeBeforeClickToCI",value:this.unloadTimeBeforeClickToCI}]},e}();t.MissedTimeToInteractiveTimeDataVector=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoomerangConfig={beacon_type:"POST",instrument_xhr:!0,autorun:!0,log:null,Continuity:{ttiWaitForFrameworkReady:!1,monitorFrameRate:!0,monitorStats:!0,monitorInteractions:!0,monitorLongTasks:!0,monitorPageBusy:!0,enabled:!0,afterOnload:!0,waitAfterOnload:4e4,sendTimeline:!0,isSpa:!0},AutoXHR:{monitorFetch:!0},SPA:{enabled:!0},History:{enabled:!0,auto:!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.legacyObserverSites=["advantage","brandRegistry","sellerCentral","supplyChainConnect","vendorCentral","developerCentral","marketplaceDeveloper","jwo"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),i=n(89),o=n(16),a=function(){function e(e){this.beaconService=e,this.firedNavigation=!1}return e.prototype.documentReady=function(){var e=this;if(!window.PerformanceObserver||this.isSafari())this.useLevel1Api();else{var t=new PerformanceObserver(function(t){e.processPerformanceEntries(t.getEntries())});this.processPerformanceEntries(window.performance.getEntries()),o.safeRun(function(){t.observe({type:"navigation"}),t.observe({type:"paint"}),t.observe({type:"largest-contentful-paint",buffered:!0})})}},e.prototype.isSafari=function(){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("safari")&&-1===e.indexOf("chrome")},e.prototype.processPerformanceEntries=function(e){for(var t=this,n=function(e){o.safeRun(function(){"navigation"==e.entryType?t.handleNavigationTiming(e):"paint"==e.entryType?t.handlePaintTiming(e):"largest-contentful-paint"==e.entryType&&t.handleLargestContentfulPaintTiming(e)})},r=0,i=e;r<i.length;r++){n(i[r])}},e.prototype.handleNavigationTiming=function(e){!this.firedNavigation&&e.domInteractive>0&&e.domComplete>0&&(this.firedNavigation=!0,this.beaconService.publish(new r.NavigationPerformanceDataVector(e.startTime,e.domInteractive,e.domComplete)))},e.prototype.handlePaintTiming=function(e){"first-paint"===e.name?this.beaconService.publish(new i.FirstPaintDataVector(e.startTime)):"first-contentful-paint"===e.name&&this.beaconService.publish(new i.FirstContentfulPaintDataVector(e.startTime))},e.prototype.handleLargestContentfulPaintTiming=function(e){this.beaconService.publish(new i.LargestContentfulPaintDataVector(e.renderTime?e.renderTime:e.loadTime))},e.prototype.useLevel1Api=function(){this.beaconService.publish(new r.NavigationPerformanceDataVector(window.performance.timing.requestStart,window.performance.timing.domInteractive,window.performance.timing.domComplete))},e.prototype.documentWillUnload=function(){return[]},e}();t.BrowserPerformanceInstrument=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t,n){this.startTime=e,this.domInteractive=t,this.domComplete=n}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"domCompleteTime",value:this.domComplete-this.startTime},{type:r.Type.Timer,name:"domInteractiveTime",value:this.domInteractive-this.startTime}].filter(function(e){return e.value>0})},e}();t.NavigationPerformanceDataVector=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e){this.firstPaint=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"firstPaint",value:this.firstPaint}]},e}();t.FirstPaintDataVector=i;var o=function(){function e(e){this.firstContentfulPaint=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"firstContentfulPaint",value:this.firstContentfulPaint}]},e}();t.FirstContentfulPaintDataVector=o;var a=function(){function e(e){this.largestContentfulPaint=e}return e.prototype.read=function(){return[{type:r.Type.Timer,name:"largestContentfulPaint",value:this.largestContentfulPaint}]},e}();t.LargestContentfulPaintDataVector=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91),i=function(){function e(e,t){this.beaconService=e,this.config=t,this.userAgent=window.navigator.userAgent,this.referrer=document.referrer}return e.prototype.documentReady=function(){this.userAgent&&this.handleUserAgentString(this.userAgent),!1===this.config.mons&&this.handleReferrerString(this.referrer),this.handleSubPageTypeString(this.config.subPageType),this.handleCathodeVersionString(this.config.cathodeVersion)},e.prototype.documentWillUnload=function(){return[]},e.prototype.getPathFromUrl=function(e){return e.split("?")[0]},e.prototype.handleUserAgentString=function(e){this.beaconService.publish(new r.UaStringDataVector(e))},e.prototype.handleReferrerString=function(e){e&&this.beaconService.publish(new r.ReferrerDataVector(this.getPathFromUrl(e)))},e.prototype.handleSubPageTypeString=function(e){e&&this.beaconService.publish(new r.SubPageTypeDataVector(e))},e.prototype.handleCathodeVersionString=function(e){e&&this.beaconService.publish(new r.CathodeVersionDataVector(e))},e}();t.ClientDimensionInstrument=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.USER_AGENT_STRING="userAgentString",t.REFERRER="referrer",t.SUB_PAGE_TYPE="subPageType",t.CATHODE_VERSION="cathodeVersion";var i=function(){function e(e){this.userAgentString=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.USER_AGENT_STRING,value:this.userAgentString}]},e}();t.UaStringDataVector=i;var o=function(){function e(e){this.referrer=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.REFERRER,value:this.referrer}]},e}();t.ReferrerDataVector=o;var a=function(){function e(e){this.subPageType=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.SUB_PAGE_TYPE,value:this.subPageType}]},e}();t.SubPageTypeDataVector=a;var u=function(){function e(e){this.cathodeVersion=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.CATHODE_VERSION,value:this.cathodeVersion}]},e}();t.CathodeVersionDataVector=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=function(){function e(e,t){this.beaconService=e,this.config=t}return e.prototype.documentReady=function(){this.handleMerchantId(this.config.merchantId),this.handleVendorId(this.config.vendorId),this.handlePartnerId(this.config.partnerId),this.handleCustomerId(this.config.customerId),this.handleSessionId(this.config.sessionId)},e.prototype.documentWillUnload=function(){return[]},e.prototype.handleMerchantId=function(e){e&&this.beaconService.publish(new r.MerchantIdDataVector(e))},e.prototype.handleVendorId=function(e){e&&this.beaconService.publish(new r.VendorIdDataVector(e))},e.prototype.handlePartnerId=function(e){e&&this.beaconService.publish(new r.PartnerIdDataVector(e))},e.prototype.handleCustomerId=function(e){var t=this,n=window.spectrometer?window.spectrometer.customerId:null;e?this.beaconService.publish(new r.CustomerIdDataVector(e)):n&&null!==n?this.beaconService.publish(new r.CustomerIdDataVector(n)):document.addEventListener("cathode-customerId",function(e){var n=e.detail.customerId;t.beaconService.publish(new r.CustomerIdDataVector(n))})},e.prototype.handleSessionId=function(e){e&&this.beaconService.publish(new r.SessionIdDataVector(e))},e}();t.UserInstrument=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.MERCHANT_ID="merchantId",t.VENDOR_ID="vendorId",t.PARTNER_ID="partnerId",t.CUSTOMER_ID="customerId",t.SESSION_ID="sessionId";var i=function(){function e(e){this.merchantId=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.MERCHANT_ID,value:this.merchantId}]},e}();t.MerchantIdDataVector=i;var o=function(){function e(e){this.vendorId=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.VENDOR_ID,value:this.vendorId}]},e}();t.VendorIdDataVector=o;var a=function(){function e(e){this.partnerId=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.PARTNER_ID,value:this.partnerId}]},e}();t.PartnerIdDataVector=a;var u=function(){function e(e){this.customerId=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.CUSTOMER_ID,value:this.customerId}]},e}();t.CustomerIdDataVector=u;var c=function(){function e(e){this.sessionId=e}return e.prototype.read=function(){return[{type:r.Type.String,name:t.SESSION_ID,value:this.sessionId}]},e}();t.SessionIdDataVector=c},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(35),i=n(17);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){try{var e=-1!==location.href.indexOf("cathodeDebug=true"),t=(a=document.getElementById("cathode-loader"))?{sitename:a.dataset.sn||null,domain:a.dataset.domain||"prod",realm:a.dataset.realm||"USAmazon",http_request_id:(n=a.dataset,n.http_request_id?n.http_request_id:window.ue_id?window.ue_id:void 0),browserPerformance:Object(i.a)(a.dataset.browserPerformance,!1),targetNode:a.dataset.targetNode||null,sessionId:a.dataset.sessionId||null,subPageType:a.dataset.subPageType||null,customerId:a.dataset.customerId||null,merchantId:a.dataset.merchantId||null,vendorId:a.dataset.vendorId||null,partnerId:a.dataset.partnerId||null,applicationName:a.dataset.applicationName||null,cathodeVersion:a.getAttribute("src")||null,mons:Object(i.a)(a.dataset.mons,!0)}:null;t&&t.sitename?new r.SpectrometerBoomerangInstrument(t.sitename,function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({debug:e},t)):console.warn("Cathode.js: sitename not specified")}catch(u){void 0!==window.ue&&ue.count("cathodeInitFatal",1)}var n;var a}()}]);
//# sourceMappingURL=cathodeBoomerang.513db1f0c20c00702950.min.js.map